# Issue and Pull Request Document Creation System

## **🔧 Issue/PR Document Creation Rule**

### **Rule Trigger**
**When the user requests creation of Issue or pull request documents, or uses context-aware phrases like:**
- "create issue documents"
- "generate issue files" 
- "create bug report docs"
- "create feature request docs"
- "document this issue"
- "create PR documentation"

### **Rule Implementation**

#### **File Structure Generation**
Create the following structure in `Documentation/Development/Issues/Agent-{Name}-{Type}`:

```
{IssueName}_Master.md
├── {IssueName}_Fix1.md (for bugs/corrections)
├── {IssueName}_Phase1.md (for features/implementations)
├── {IssueName}_Fix2.md or Phase2.md (hybrid system)
└── {IssueName}_Continue.md
```

#### **Naming Strategy: HYBRID_SYSTEM**
- Use **Fix#** for: Bug fixes, corrections, repairs, specific problems
- Use **Phase#** for: Feature development, multi-step implementations, enhancements
- Allow mixing both in same issue when appropriate

#### **File Templates**

##### **Master File Template**
```markdown
# {IssueName} - Master Issue

## 📋 Issue Overview
**Type:** [Bug Fix | Feature | Enhancement | Documentation]
**Priority:** [High | Medium | Low]
**Status:** [Not Started | In Progress | Review | Complete]
**Created:** {Date}
**Last Updated:** {Date}

## 🎯 Summary
[Brief description of the issue and overall goals]

## 📊 Progress Tracking

### Sub-Issues
- [ ] [{IssueName}_Fix1.md](./{IssueName}_Fix1.md) - [Description]
- [ ] [{IssueName}_Phase1.md](./{IssueName}_Phase1.md) - [Description]
- [ ] [{IssueName}_Fix2.md](./{IssueName}_Fix2.md) - [Description]

### Overall Progress: 0% Complete
- **Completed:** 0 of {N} sub-issues
- **In Progress:** 0 of {N} sub-issues
- **Not Started:** {N} of {N} sub-issues

## 🔄 Quick Actions
- [📋 Continue Work](./{IssueName}_Continue.md)
- [❓ Generate Questions](../CopilotQuestions/) (if complex issue)

## 📝 Notes
[Additional notes, dependencies, or considerations]

---
*Generated by MTM Issue/PR Document Creation Rule*
```

##### **Fix/Phase File Template (Agent-Optimized)**
```markdown
# {IssueName}_Fix#/Phase# - Agent Instructions

## 🎯 **AGENT EXECUTION CONTEXT**
**Issue Type:** [Fix | Phase]
**Complexity:** [Simple | Medium | Complex]
**Estimated Time:** [15min | 1hr | 4hr | 1day]
**Dependencies:** [List any required files, services, or other fixes]

## 📋 **PRECISE OBJECTIVES**
### Primary Goal
[Single, clear statement of what this Fix/Phase accomplishes]

### Acceptance Criteria
- [ ] Specific measurable outcome 1
- [ ] Specific measurable outcome 2
- [ ] Specific measurable outcome 3

## 🔧 **IMPLEMENTATION DETAILS**

### Files to Modify/Create
```
Path/To/File1.cs - [Purpose]
Path/To/File2.axaml - [Purpose]
Path/To/File3.md - [Purpose]
```

### Code Patterns Required
```csharp
// MTM-specific patterns to follow
// Example: ReactiveUI property pattern
private string _property = string.Empty;
public string Property
{
    get => _property;
    set => this.RaiseAndSetIfChanged(ref _property, value);
}
```

### Database Operations (If Applicable)
```sql
-- Required stored procedure calls
CALL sp_ProcedureName(parameter1, parameter2);
```

## ⚡ **EXECUTION SEQUENCE**
1. **Step 1:** [Specific action with file references]
2. **Step 2:** [Specific action with expected outcome]
3. **Step 3:** [Specific action with validation criteria]
4. **Step 4:** [Testing/verification steps]

## 🧪 **VALIDATION REQUIREMENTS**
### Automated Tests
- [ ] Unit test: [Specific test case]
- [ ] Integration test: [Specific scenario]

### Manual Verification
- [ ] UI behavior: [Specific interaction to verify]
- [ ] Data integrity: [Specific data state to check]

## 🔗 **CONTEXT REFERENCES**
### Related Files
- [Existing file that provides context]
- [Documentation that explains business logic]

### MTM-Specific Requirements
- **Transaction Type Logic:** [If applicable - user intent not operation number]
- **Database Pattern:** [Stored procedures only]
- **UI Pattern:** [Avalonia + ReactiveUI requirements]

## 🚨 **ERROR HANDLING**
### Expected Issues
- [Potential problem and resolution]
- [Common error and fix approach]

### Rollback Plan
[Steps to undo changes if implementation fails]

---
*Agent-Optimized Instructions for GitHub Copilot*
```

##### **Continue Script Template (Smart Resume)**
```markdown
# {IssueName}_Continue - Smart Resume

## 🔄 **CURRENT STATE DETECTION**
**Last Updated:** {Auto-generated timestamp}
**Current Status:** [Auto-detected from progress tracking]

### Progress Summary
- **Completed:** [Auto-calculated from Master file]
- **Active:** [Currently in-progress items]
- **Next:** [Immediate next action]

## ⚡ **IMMEDIATE RESUMPTION**

### Quick Context
[2-3 sentences about current state and immediate goal]

### Next Action
**Execute immediately:** [Single, specific next step]

### Required Context Files
```
File1.cs - [Why needed for next action]
File2.md - [Current state information]
```

## 🎯 **SMART CONTINUATION COMMANDS**

### For Copilot Agent
```markdown
Continue work on {IssueName} from current state:
- Review progress in {IssueName}_Master.md
- Execute next incomplete item in priority order
- Update progress tracking after completion
```

### For Manual Continuation
1. **Current Focus:** [Specific Fix/Phase to work on]
2. **Key Context:** [Essential information to remember]
3. **Immediate Task:** [Actionable next step]

## 📊 **STATE CHECKPOINTS**
- [ ] Checkpoint 1: [Major milestone completed]
- [ ] Checkpoint 2: [Current position indicator]
- [ ] Checkpoint 3: [Next major milestone]

## 🔧 **OPTIMIZATION NOTES**
### Efficiency Tips
- [Context that prevents re-reading entire codebase]
- [Key decisions already made]
- [Shortcuts or patterns established]

### Avoid Re-work
- [Solutions already attempted]
- [Approaches that didn't work]
- [Dependencies already resolved]

---
*Smart Resume System - Optimized for Quick Continuation*
```

#### **Integration with Questions System**
When issues are complex, automatically generate a questions HTML file:

1. **Detect complexity** based on:
   - Multiple Fix/Phase files needed
   - Cross-system dependencies
   - Unclear requirements

2. **Generate questions file** in `Documentation/Development/CopilotQuestions/`
   - File name: `{IssueName}_Clarification_Questions.html`
   - Use existing HTML template system
   - Include issue-specific questions

3. **Link from Master file** with suggestion to clarify requirements first

#### **Template Application Rules**

1. **File Creation Order:**
   - Generate Master file first
   - Create Fix/Phase files based on complexity analysis
   - Generate Continue script with smart state detection
   - Generate questions HTML if complexity threshold met

2. **Content Population:**
   - Use MTM-specific patterns and requirements
   - Include proper Avalonia + ReactiveUI templates
   - Reference stored procedure patterns
   - Apply TransactionType logic rules

3. **Progress Tracking:**
   - Auto-update Master file progress
   - Smart detection of completion states
   - Integration with Git commit patterns

#### **Context-Aware Activation**
The rule activates when detecting:
- Direct requests for issue documentation
- Problem descriptions that need structured solutions
- Bug reports requiring systematic fixes
- Feature requests needing phased implementation
- References to GitHub Copilot Agent usage

#### **Quality Integration**
- All generated files follow MTM coding conventions
- Include proper error handling patterns
- Reference organized instruction files appropriately
- Maintain consistency with existing documentation structure

## **Advanced Automation Features**

### **Smart File Generation**
- **Context analysis**: Automatically determine complexity level
- **Template selection**: Choose appropriate templates based on issue type
- **Cross-reference creation**: Generate links between related files
- **Progress tracking**: Implement automatic progress calculation

### **Integration with Development Workflow**
- **Git integration**: Link issue files with Git branches and commits
- **CI/CD integration**: Trigger builds and tests based on issue progress
- **Documentation updates**: Automatically update related documentation
- **Team notification**: Notify relevant team members of issue status changes