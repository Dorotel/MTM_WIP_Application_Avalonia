<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ================================================================== -->
    <!-- MTM COMPONENT STYLES - Modern UI Design System                    -->
    <!-- ================================================================== -->
    <!-- Generated: December 19, 2024                                      -->
    <!-- Version: 1.0 - Complete Component Library                         -->
    <!-- ================================================================== -->

    <!-- ================================================================== -->
    <!-- TAB CONTROL STYLES - HIGHEST PRIORITY - FIXED FOR SELECTED STATE -->
    <!-- ================================================================== -->
    
    <!-- Global TabControl styling -->
    <Style Selector="TabControl">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="2"/>
        <Setter Property="BorderBrush" Value="{DynamicResource MTM_Shared_Logic.BorderAccentBrush}"/>
        <Setter Property="CornerRadius" Value="8"/>
        <Setter Property="TabStripPlacement" Value="Top"/>
    </Style>

    <!-- Global TabItem styling -->
    <Style Selector="TabItem">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="{DynamicResource MTM_Shared_Logic.BorderAccentBrush}"/>
        <Setter Property="Margin" Value="0,0,2,0"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="MinWidth" Value="140"/>
        <Setter Property="HorizontalAlignment" Value="Left"/>
    </Style>

    <!-- NON-SELECTED TabItem header border styling -->
    <Style Selector="TabItem /template/ Border#PART_HeaderBorder">
        <Setter Property="Background" Value="{DynamicResource MTM_Shared_Logic.CardBackgroundBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource MTM_Shared_Logic.BorderDarkBrush}"/>
        <Setter Property="BorderThickness" Value="2,2,2,0"/>
        <Setter Property="CornerRadius" Value="8,8,0,0"/>
        <Setter Property="Padding" Value="20,16"/>
        <Setter Property="MinHeight" Value="50"/>
    </Style>

    <!-- CRITICAL FIX: Selected TabItem with DARK background - HIGHEST PRIORITY -->
    <Style Selector="TabItem:selected /template/ Border#PART_HeaderBorder">
        <Setter Property="Background" Value="{DynamicResource MTM_Shared_Logic.PrimaryAction}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource MTM_Shared_Logic.PrimaryAction}"/>
        <Setter Property="BorderThickness" Value="3,3,3,0"/>
        <Setter Property="BoxShadow" Value="0 -3 12 0 #44000000"/>
    </Style>

    <!-- CRITICAL FIX: Force dark background for all selected tab variants -->
    <Style Selector="TabItem:selected Border#PART_HeaderBorder">
        <Setter Property="Background" Value="{DynamicResource MTM_Shared_Logic.PrimaryAction}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource MTM_Shared_Logic.PrimaryAction}"/>
    </Style>

    <!-- Hover effect for non-selected tabs only -->
    <Style Selector="TabItem:pointerover:not(:selected) /template/ Border#PART_HeaderBorder">
        <Setter Property="Background" Value="{DynamicResource MTM_Shared_Logic.HoverBackground}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource MTM_Shared_Logic.BorderAccentBrush}"/>
        <Setter Property="BorderThickness" Value="2,2,2,0"/>
    </Style>

    <!-- Tab content area styling -->
    <Style Selector="TabControl /template/ Border#PART_ContentBorder">
        <Setter Property="Background" Value="{DynamicResource MTM_Shared_Logic.CardBackgroundBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource MTM_Shared_Logic.BorderAccentBrush}"/>
        <Setter Property="BorderThickness" Value="2,0,2,2"/>
        <Setter Property="CornerRadius" Value="0,8,8,8"/>
        <Setter Property="Padding" Value="0"/>
    </Style>

    <!-- CRITICAL FIX: Selected tab text styling - WHITE TEXT - HIGHEST PRIORITY -->
    <Style Selector="TabItem:selected TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.TextonDark}"/>
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="FontSize" Value="15"/>
    </Style>

    <!-- CRITICAL FIX: All text in selected tabs should be white - HIGHEST PRIORITY -->
    <Style Selector="TabItem:selected * TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.TextonDark}"/>
        <Setter Property="FontWeight" Value="Bold"/>
    </Style>

    <!-- CRITICAL FIX: Override any nested text in selected tabs - HIGHEST PRIORITY -->
    <Style Selector="TabItem:selected StackPanel TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.TextonDark}"/>
        <Setter Property="FontWeight" Value="Bold"/>
    </Style>

    <!-- CRITICAL FIX: Direct child text blocks in selected tabs -->
    <Style Selector="TabItem:selected > TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.TextonDark}"/>
        <Setter Property="FontWeight" Value="Bold"/>
    </Style>

    <!-- CRITICAL FIX: Any content presenter text in selected tabs -->
    <Style Selector="TabItem:selected ContentPresenter TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.TextonDark}"/>
        <Setter Property="FontWeight" Value="Bold"/>
    </Style>

    <!-- NON-SELECTED tab text styling -->
    <Style Selector="TabItem:not(:selected) TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.BodyText}"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="FontSize" Value="14"/>
    </Style>

    <!-- GLOBAL ICON BACKGROUND OVERRIDES - FORCE TRANSPARENT -->
    <!-- Ensure ALL tab icon borders are transparent - HIGHEST PRIORITY -->
    <Style Selector="TabItem Border:not(#PART_HeaderBorder)">
        <Setter Property="Background" Value="Transparent"/>
    </Style>

    <!-- Force transparent backgrounds for all icon containers in tabs -->
    <Style Selector="TabItem StackPanel Border">
        <Setter Property="Background" Value="Transparent"/>
    </Style>

    <!-- Override selected tab icons to ensure transparency - exclude header border -->
    <Style Selector="TabItem:selected Border:not(#PART_HeaderBorder)">
        <Setter Property="Background" Value="Transparent"/>
    </Style>

    <!-- Override selected tab icon containers -->
    <Style Selector="TabItem:selected StackPanel Border">
        <Setter Property="Background" Value="Transparent"/>
    </Style>

    <!-- Global override for any nested border in tab content (not header) -->
    <Style Selector="TabItem StackPanel Border:not(#PART_HeaderBorder)">
        <Setter Property="Background" Value="Transparent"/>
    </Style>

    <!-- Hover effects for non-selected tabs -->
    <Style Selector="TabItem:pointerover:not(:selected) Border:not(#PART_HeaderBorder)">
        <Setter Property="Opacity" Value="0.9"/>
        <Setter Property="Background" Value="Transparent"/>
    </Style>

    <Style Selector="TabItem:pointerover:not(:selected) TextBlock">
        <Setter Property="Opacity" Value="0.95"/>
    </Style>

    <!-- ADDITIONAL PRIORITY FIX: Override any ContentControl text in selected tabs -->
    <Style Selector="TabItem:selected ContentControl TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.TextonDark}"/>
        <Setter Property="FontWeight" Value="Bold"/>
    </Style>

    <!-- ADDITIONAL PRIORITY FIX: Handle nested content controls -->
    <Style Selector="TabItem:selected > ContentControl > TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.TextonDark}"/>
        <Setter Property="FontWeight" Value="Bold"/>
    </Style>

    <!-- ================================================================== -->
    <!-- BUTTON STYLES                                                     -->
    <!-- ================================================================== -->
    
    <!-- Primary Button -->
    <Style Selector="Button.mtm-primary">
        <Setter Property="Background" Value="{DynamicResource MTM_Shared_Logic.PrimaryAction}"/>
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.TextonDark}"/>
        <Setter Property="Padding" Value="16,10"/>
        <Setter Property="CornerRadius" Value="8"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="MinHeight" Value="40"/>
        <Setter Property="Cursor" Value="Hand"/>
    </Style>
    
    <!-- ================================================================== -->
    <!-- INPUT CONTROLS                                                    -->
    <!-- ================================================================== -->
    
    <!-- Global TextBox override to ensure text is visible -->
    <Style Selector="TextBox">
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.HeadingText}"/>
    </Style>

    <!-- Global AutoCompleteBox override to ensure text is visible -->
    <Style Selector="AutoCompleteBox">
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.HeadingText}"/>
    </Style>

    <!-- Global ComboBox override to ensure text is visible -->
    <Style Selector="ComboBox">
        <Setter Property="Foreground" Value="{DynamicResource MTM_Shared_Logic.HeadingText}"/>
    </Style>

</Styles>
