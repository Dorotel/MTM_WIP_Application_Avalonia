<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TransferItemViewModel - The Warehouse Transfer Coordinator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #ffffff;
            line-height: 1.6;
        }
        .header {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        .nav-section {
            background: rgba(255, 215, 0, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #FFD700;
        }
        .nav-button {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
            padding: 0.75rem 1.5rem;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            margin-right: 1rem;
            margin-bottom: 0.5rem;
            display: inline-block;
            transition: all 0.3s ease;
        }
        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
        }
        .content-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            border-left: 4px solid #FFD700;
        }
        .highlight {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-weight: bold;
        }
        .code-block {
            background: #2d2d2d;
            border: 1px solid #555;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }
        .workflow-step {
            background: rgba(255, 215, 0, 0.1);
            border-left: 3px solid #FFD700;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }
        .analogy-box {
            background: linear-gradient(135deg, #4a4a4a 0%, #6a6a6a 100%);
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #FFD700;
        }
        h1, h2, h3 { color: #FFD700; }
        .metric { 
            background: rgba(255, 215, 0, 0.2); 
            padding: 0.5rem; 
            border-radius: 5px; 
            display: inline-block; 
            margin: 0.25rem;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
        .status-badge {
            background: #17a2b8;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }
        .transfer-flow {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1rem;
            align-items: center;
            margin: 1rem 0;
            background: rgba(255, 215, 0, 0.1);
            padding: 1rem;
            border-radius: 8px;
        }
        .location-box {
            background: #2d2d2d;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #FFD700;
        }
        .arrow {
            font-size: 2rem;
            color: #FFD700;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîÑ TransferItemViewModel - The Warehouse Transfer Coordinator</h1>
        <p><strong>MTM WIP Application Component</strong> | <span class="status-badge">Location Movement Specialist</span></p>
    </div>

    <div class="nav-section">
        <h3>üìã Quick Navigation</h3>
        <a href="../../../Technical/FileDefinitions/ViewModels/TransferItemViewModel.html" class="nav-button" accesskey="t">üîß Technical View (Alt+T)</a>
        <a href="../../index.html" class="nav-button">üìö Documentation Home</a>
        <a href="../../../index.html" class="nav-button">üè† Main Documentation</a>
    </div>

    <div class="analogy-box">
        <h2>üè≠ Real-World Manufacturing Analogy</h2>
        <p><strong>Think of TransferItemViewModel as the "Warehouse Transfer Coordinator"</strong> - the logistics specialist who manages the movement of parts between different locations within the manufacturing facility, ensuring accurate tracking of where everything is at all times.</p>
        
        <div class="workflow-step">
            <strong>üîÑ The Transfer Coordinator's Responsibilities:</strong>
            <ul>
                <li><strong>Location Management:</strong> Tracks parts moving between work centers, storage areas, and production lines</li>
                <li><strong>Dual Validation:</strong> Verifies stock exists at source location before authorizing move</li>
                <li><strong>Logistics Coordination:</strong> Manages the physical movement and system updates simultaneously</li>
                <li><strong>Audit Trail Creation:</strong> Documents complete transfer history for compliance and tracking</li>
                <li><strong>Workflow Optimization:</strong> Ensures parts flow efficiently through manufacturing processes</li>
            </ul>
        </div>
    </div>

    <div class="content-section">
        <h2>üéØ What This Component Does</h2>
        <p>TransferItemViewModel is the <strong>location movement specialist</strong> that handles transferring inventory items between different locations within the MTM system. It ensures accurate tracking of part movements and maintains complete audit trails for all transfers.</p>

        <div class="highlight">
            üí° <strong>Key Principle:</strong> This ViewModel manages the complex "dual-location" process - it must validate source location availability AND update both source and destination locations atomically.
        </div>

        <h3>üîÑ Transfer Process Visualization</h3>
        <div class="transfer-flow">
            <div class="location-box">
                <h4>üìç FROM Location</h4>
                <p>WC01 - Work Center 1</p>
                <p><em>Stock Available: 50 units</em></p>
            </div>
            <div class="arrow">‚û°Ô∏è</div>
            <div class="location-box">
                <h4>üìç TO Location</h4>
                <p>WC02 - Work Center 2</p>
                <p><em>Receiving: 25 units</em></p>
            </div>
        </div>

        <h3>üîÑ Complete Transfer Workflow</h3>
        <div class="workflow-step">
            <strong>Step 1:</strong> Production planning determines parts need to move to next work center
        </div>
        <div class="workflow-step">
            <strong>Step 2:</strong> System validates sufficient stock exists at source location
        </div>
        <div class="workflow-step">
            <strong>Step 3:</strong> Coordinator confirms part ID, FROM location, TO location, and transfer quantity
        </div>
        <div class="workflow-step">
            <strong>Step 4:</strong> System records transfer with TransactionType.TRANSFER (always moving stock)
        </div>
        <div class="workflow-step">
            <strong>Step 5:</strong> Source location decreases, destination location increases atomically
        </div>
        <div class="workflow-step">
            <strong>Step 6:</strong> Complete transfer audit trail is created for tracking and compliance
        </div>
    </div>

    <div class="content-section">
        <h2>üè¢ MTM-Specific Business Rules</h2>
        
        <div class="highlight">
            üö® <strong>Critical MTM Rule:</strong> TransferItemViewModel ALWAYS uses TransactionType.TRANSFER because the user intent is moving stock between locations, regardless of the operation number or workflow step.
        </div>

        <h3>üìä Dual-Location Transaction Logic</h3>
        <div class="code-block">
            ‚úÖ CORRECT: TransactionType = TRANSFER (User is moving stock)
            ‚ùå WRONG: Determining TransactionType from Operation number
            
            Transfer Record Structure:
            ‚îú‚îÄ‚îÄ TransactionType: TRANSFER (always)
            ‚îú‚îÄ‚îÄ PartID: The part being moved
            ‚îú‚îÄ‚îÄ FromLocation: Source location (must have sufficient stock)
            ‚îú‚îÄ‚îÄ ToLocation: Destination location (will receive stock)
            ‚îú‚îÄ‚îÄ Operation: Workflow step number (context only)
            ‚îî‚îÄ‚îÄ Quantity: Amount being transferred
        </code-block>

        <h3>‚ö†Ô∏è Transfer Validation Requirements</h3>
        <ul>
            <li><strong>Source Availability:</strong> Cannot transfer more than available at FROM location</li>
            <li><strong>Location Validation:</strong> Both FROM and TO locations must be valid and accessible</li>
            <li><strong>Same Part Verification:</strong> Cannot change part identity during transfer</li>
            <li><strong>Operation Context:</strong> Operation number provides workflow context but doesn't change transfer logic</li>
            <li><strong>Atomic Operation:</strong> Transfer must succeed completely or fail completely (no partial transfers)</li>
        </ul>

        <h3>üîß Integration Points</h3>
        <ul>
            <li><strong>InventoryService:</strong> Handles complex dual-location database operations</li>
            <li><strong>ApplicationStateService:</strong> Maintains user context and permissions for transfers</li>
            <li><strong>Location Validation:</strong> Ensures both source and destination locations are valid</li>
            <li><strong>Production Planning:</strong> Receives transfer requests from manufacturing workflow systems</li>
        </ul>
    </div>

    <div class="content-section">
        <h2>üîç Key Differences from Add/Remove Operations</h2>
        
        <div class="code-block">
            AddItemViewModel (IN):
            ‚îú‚îÄ‚îÄ Single location (TO only)
            ‚îú‚îÄ‚îÄ Increases total system inventory
            ‚îú‚îÄ‚îÄ No source validation needed
            ‚îî‚îÄ‚îÄ Simple transaction recording

            RemoveItemViewModel (OUT):
            ‚îú‚îÄ‚îÄ Single location (FROM only)  
            ‚îú‚îÄ‚îÄ Decreases total system inventory
            ‚îú‚îÄ‚îÄ Source availability validation required
            ‚îî‚îÄ‚îÄ Consumption tracking

            TransferItemViewModel (TRANSFER):
            ‚îú‚îÄ‚îÄ Dual locations (FROM and TO)
            ‚îú‚îÄ‚îÄ Total system inventory unchanged
            ‚îú‚îÄ‚îÄ Source availability + destination validity required
            ‚îî‚îÄ‚îÄ Movement tracking with dual updates
        </code-block>

        <h3>üì¶ Common Transfer Scenarios</h3>
        <ul>
            <li><strong>Work Center Progression:</strong> Parts moving through manufacturing workflow steps</li>
            <li><strong>Storage Reorganization:</strong> Moving inventory to different warehouse locations</li>
            <li><strong>Production Line Feeding:</strong> Moving parts from storage to active production areas</li>
            <li><strong>Quality Hold Areas:</strong> Moving parts to/from quality inspection locations</li>
            <li><strong>Cross-Facility Movement:</strong> Transferring between different buildings or facilities</li>
        </ul>
    </div>

    <div class="content-section">
        <h2>‚ö° Advanced Transfer Features</h2>
        
        <h3>üîÑ Atomic Dual-Location Updates</h3>
        <div class="workflow-step">
            <strong>Database Transaction:</strong> Both source removal and destination addition must succeed or both fail
        </div>
        <div class="workflow-step">
            <strong>Inventory Consistency:</strong> Total system inventory remains unchanged after transfer
        </div>
        <div class="workflow-step">
            <strong>Audit Completeness:</strong> Single transaction record captures complete transfer details
        </div>

        <h3>üìä Transfer Validation Matrix</h3>
        <div class="code-block">
            Validation Checks:
            ‚úì Source location has sufficient quantity
            ‚úì Destination location exists and is accessible  
            ‚úì User has transfer permissions
            ‚úì Part exists in source location
            ‚úì Transfer quantity is positive
            ‚úì FROM and TO locations are different
        </code-block>

        <h3>üéØ Workflow Integration</h3>
        <p>Transfer operations often represent progression through manufacturing workflow steps, where the operation number indicates which stage of production the parts are moving to.</p>
    </div>

    <div class="content-section">
        <h2>üë• Who Uses This Component</h2>
        <div class="metric">üè≠ Production Coordinators</div>
        <div class="metric">üì¶ Warehouse Supervisors</div>
        <div class="metric">üîß Material Handlers</div>
        <div class="metric">üìä Logistics Managers</div>

        <h3>üìà Business Value</h3>
        <ul>
            <li><strong>Location Accuracy:</strong> Precise tracking of where parts are located at all times</li>
            <li><strong>Workflow Efficiency:</strong> Smooth movement of parts through manufacturing processes</li>
            <li><strong>Audit Compliance:</strong> Complete transfer history for regulatory and quality requirements</li>
            <li><strong>Inventory Integrity:</strong> Atomic operations ensure data consistency across locations</li>
            <li><strong>Production Support:</strong> Enables just-in-time movement of parts to production areas</li>
        </ul>
    </div>

    <div class="content-section">
        <h2>‚öôÔ∏è Technical Foundation</h2>
        <p>This component uses <strong>advanced MVVM architecture</strong> with complex validation logic for dual-location inventory operations:</p>

        <div class="code-block">
            üèóÔ∏è Architecture Pattern: MVVM with Complex Validation
            üíâ Dependency Injection: Full constructor injection
            üîÑ Reactive Framework: ReactiveUI for UI patterns
            üìù Logging: Detailed transfer tracking and audit logging
            üõ°Ô∏è Error Handling: Atomic transaction failure protection
            ‚öñÔ∏è Dual Validation: Source availability + destination validity
            üîÑ Atomic Operations: All-or-nothing transaction processing
        </code-block>

        <h3>üîó Service Dependencies</h3>
        <ul>
            <li><strong>IInventoryService:</strong> Handles complex dual-location database operations via stored procedures</li>
            <li><strong>IApplicationStateService:</strong> Provides user context and transfer authorization</li>
            <li><strong>ILogger:</strong> Comprehensive transfer logging for audit trails and troubleshooting</li>
        </ul>

        <h3>üîÑ Planned Implementation Features</h3>
        <div class="workflow-step">
            <strong>Dual-Location Validation:</strong> Real-time checking of source availability and destination validity
        </div>
        <div class="workflow-step">
            <strong>Atomic Transfer Processing:</strong> Database transactions ensuring complete success or complete failure
        </div>
        <div class="workflow-step">
            <strong>Transfer History Tracking:</strong> Complete audit trail with source, destination, and timing details
        </div>
    </div>

    <div class="nav-section">
        <h3>üîç Explore More</h3>
        <a href="../../../Technical/FileDefinitions/ViewModels/TransferItemViewModel.html" class="nav-button">üîß View Technical Implementation</a>
        <a href="AddItemViewModel.html" class="nav-button">üì• Related: Add Items</a>
        <a href="RemoveItemViewModel.html" class="nav-button">üì§ Related: Remove Items</a>
        <a href="../Services/InventoryService.html" class="nav-button">üóÉÔ∏è Related: Inventory Service</a>
    </div>
</body>
</html>