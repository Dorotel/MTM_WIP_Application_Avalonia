<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RemoveItemViewModel - The Warehouse Stock Removal Clerk</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #ffffff;
            line-height: 1.6;
        }
        .header {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        .nav-section {
            background: rgba(255, 215, 0, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #FFD700;
        }
        .nav-button {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
            padding: 0.75rem 1.5rem;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            margin-right: 1rem;
            margin-bottom: 0.5rem;
            display: inline-block;
            transition: all 0.3s ease;
        }
        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
        }
        .content-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            border-left: 4px solid #FFD700;
        }
        .highlight {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-weight: bold;
        }
        .code-block {
            background: #2d2d2d;
            border: 1px solid #555;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }
        .workflow-step {
            background: rgba(255, 215, 0, 0.1);
            border-left: 3px solid #FFD700;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }
        .analogy-box {
            background: linear-gradient(135deg, #4a4a4a 0%, #6a6a6a 100%);
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #FFD700;
        }
        h1, h2, h3 { color: #FFD700; }
        .metric { 
            background: rgba(255, 215, 0, 0.2); 
            padding: 0.5rem; 
            border-radius: 5px; 
            display: inline-block; 
            margin: 0.25rem;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
        .status-badge {
            background: #dc3545;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }
        .warning-box {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid #dc3545;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: #ff6b6b;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“¤ RemoveItemViewModel - The Warehouse Stock Removal Clerk</h1>
        <p><strong>MTM WIP Application Component</strong> | <span class="status-badge">Outbound Stock Processing</span></p>
    </div>

    <div class="nav-section">
        <h3>ğŸ“‹ Quick Navigation</h3>
        <a href="../../../Technical/FileDefinitions/ViewModels/RemoveItemViewModel.html" class="nav-button" accesskey="t">ğŸ”§ Technical View (Alt+T)</a>
        <a href="../../index.html" class="nav-button">ğŸ“š Documentation Home</a>
        <a href="../../../index.html" class="nav-button">ğŸ  Main Documentation</a>
    </div>

    <div class="analogy-box">
        <h2>ğŸ­ Real-World Manufacturing Analogy</h2>
        <p><strong>Think of RemoveItemViewModel as the "Warehouse Stock Removal Clerk"</strong> - the specialized employee who handles the critical task of processing outbound inventory, ensuring accurate tracking when parts leave the warehouse for production use or customer shipments.</p>
        
        <div class="workflow-step">
            <strong>ğŸ“¤ The Removal Clerk's Responsibilities:</strong>
            <ul>
                <li><strong>Stock Verification:</strong> Confirms availability before processing removal requests</li>
                <li><strong>Consumption Tracking:</strong> Records exactly what parts are being consumed and by whom</li>
                <li><strong>Production Support:</strong> Handles parts going to production lines for manufacturing</li>
                <li><strong>Audit Documentation:</strong> Maintains detailed records of all outbound transactions</li>
                <li><strong>Inventory Updates:</strong> Ensures system accurately reflects reduced stock levels</li>
            </ul>
        </div>
    </div>

    <div class="content-section">
        <h2>ğŸ¯ What This Component Does</h2>
        <p>RemoveItemViewModel is the <strong>outbound inventory specialist</strong> that handles removing inventory items from the MTM warehouse system. It ensures accurate tracking of parts consumption and maintains audit trails for all outbound transactions.</p>

        <div class="highlight">
            ğŸ’¡ <strong>Key Principle:</strong> This ViewModel follows the "consumption tracking" pattern - it handles removing stock from inventory with detailed validation to prevent over-consumption and ensure accurate inventory levels.
        </div>

        <h3>ğŸ”„ Stock Removal Process</h3>
        <div class="workflow-step">
            <strong>Step 1:</strong> Production request or consumption order is received
        </div>
        <div class="workflow-step">
            <strong>Step 2:</strong> System validates current stock levels and availability
        </div>
        <div class="workflow-step">
            <strong>Step 3:</strong> Clerk confirms part ID, location, operation, and consumption quantity
        </div>
        <div class="workflow-step">
            <strong>Step 4:</strong> System records removal with TransactionType.OUT (always removing stock)
        </div>
        <div class="workflow-step">
            <strong>Step 5:</strong> Inventory levels decrease and consumption audit trail is created
        </div>
    </div>

    <div class="content-section">
        <h2>ğŸ¢ MTM-Specific Business Rules</h2>
        
        <div class="highlight">
            ğŸš¨ <strong>Critical MTM Rule:</strong> RemoveItemViewModel ALWAYS uses TransactionType.OUT because the user intent is removing stock from inventory, regardless of the operation number or destination.
        </div>

        <h3>âš ï¸ Stock Validation Requirements</h3>
        <div class="warning-box">
            <strong>Critical Validation Rules:</strong>
            <ul>
                <li><strong>Availability Check:</strong> Cannot remove more than current stock levels</li>
                <li><strong>Location Verification:</strong> Stock must exist at specified location</li>
                <li><strong>Operation Context:</strong> Operation number must be valid for the part</li>
                <li><strong>User Authorization:</strong> User must have permission for outbound transactions</li>
                <li><strong>Quantity Validation:</strong> Removal quantity must be positive and not exceed available stock</li>
            </ul>
        </div>

        <h3>ğŸ“Š Transaction Type Logic</h3>
        <div class="code-block">
            âœ… CORRECT: TransactionType = OUT (User is removing stock)
            âŒ WRONG: Determining TransactionType from Operation number
            
            // Operation numbers like "90", "100", "110" are workflow steps,
            // NOT indicators of whether stock is being added or removed.
            
            // The business intent is always REMOVING stock from inventory.
        </div>

        <h3>ğŸ”§ Integration Points</h3>
        <ul>
            <li><strong>InventoryService:</strong> Handles stock level validation and database operations</li>
            <li><strong>ApplicationStateService:</strong> Maintains current user context and permissions</li>
            <li><strong>Quick Buttons:</strong> Can populate this form for frequently removed items</li>
            <li><strong>Production Systems:</strong> Receives consumption requests from manufacturing processes</li>
        </ul>
    </div>

    <div class="content-section">
        <h2>ğŸ” Key Differences from AddItemViewModel</h2>
        
        <div class="code-block">
            AddItemViewModel (IN):
            â”œâ”€â”€ Adds stock TO inventory
            â”œâ”€â”€ Increases inventory levels  
            â”œâ”€â”€ Usually from suppliers/production completion
            â””â”€â”€ No stock level validation needed

            RemoveItemViewModel (OUT):
            â”œâ”€â”€ Removes stock FROM inventory
            â”œâ”€â”€ Decreases inventory levels
            â”œâ”€â”€ For production consumption/shipments
            â””â”€â”€ REQUIRES stock availability validation
        </code-block>

        <h3>ğŸ“¦ Common Removal Scenarios</h3>
        <ul>
            <li><strong>Production Consumption:</strong> Parts consumed during manufacturing processes</li>
            <li><strong>Customer Shipments:</strong> Finished goods sent to customers</li>
            <li><strong>Internal Transfers:</strong> Parts moved to different facilities (recorded as removal from source)</li>
            <li><strong>Waste/Scrap:</strong> Damaged or unusable parts removed from active inventory</li>
            <li><strong>Quality Hold Removal:</strong> Parts removed due to quality issues</li>
        </ul>
    </div>

    <div class="content-section">
        <h2>ğŸ‘¥ Who Uses This Component</h2>
        <div class="metric">ğŸ­ Production Workers</div>
        <div class="metric">ğŸ“¦ Shipping Clerks</div>
        <div class="metric">ğŸ”§ Assembly Teams</div>
        <div class="metric">ğŸ“Š Inventory Managers</div>

        <h3>ğŸ“ˆ Business Value</h3>
        <ul>
            <li><strong>Accuracy:</strong> Prevents over-consumption with real-time stock validation</li>
            <li><strong>Traceability:</strong> Complete audit trail for all outbound transactions</li>
            <li><strong>Production Support:</strong> Ensures parts are available when needed for manufacturing</li>
            <li><strong>Cost Control:</strong> Accurate consumption tracking for cost accounting</li>
            <li><strong>Compliance:</strong> Meets regulatory requirements for inventory tracking</li>
        </ul>
    </div>

    <div class="content-section">
        <h2>âš™ï¸ Technical Foundation</h2>
        <p>This component follows the same <strong>MVVM architecture pattern</strong> as AddItemViewModel but with additional validation logic for stock removal operations:</p>

        <div class="code-block">
            ğŸ—ï¸ Architecture Pattern: MVVM (Model-View-ViewModel)
            ğŸ’‰ Dependency Injection: Full constructor injection
            ğŸ”„ Reactive Framework: ReactiveUI for modern UI patterns
            ğŸ“ Logging: Comprehensive logging for audit trails
            ğŸ›¡ï¸ Error Handling: Null checks and stock validation
            âš ï¸ Validation: Real-time stock availability checking
        </code-block>

        <h3>ğŸ”— Service Dependencies</h3>
        <ul>
            <li><strong>IInventoryService:</strong> Handles stock validation and database operations via stored procedures</li>
            <li><strong>IApplicationStateService:</strong> Provides current user and session context for authorization</li>
            <li><strong>ILogger:</strong> Detailed logging for consumption tracking and troubleshooting</li>
        </ul>

        <h3>ğŸ”„ Planned Implementation Features</h3>
        <div class="workflow-step">
            <strong>Stock Validation Commands:</strong> Real-time availability checking before processing removal
        </div>
        <div class="workflow-step">
            <strong>Consumption Tracking:</strong> Detailed logging of what parts are consumed for which purposes
        </div>
        <div class="workflow-step">
            <strong>Integration Events:</strong> Notifications to other systems when stock levels change
        </div>
    </div>

    <div class="nav-section">
        <h3>ğŸ” Explore More</h3>
        <a href="../../../Technical/FileDefinitions/ViewModels/RemoveItemViewModel.html" class="nav-button">ğŸ”§ View Technical Implementation</a>
        <a href="AddItemViewModel.html" class="nav-button">ğŸ“¥ Related: Add Items (Opposite Process)</a>
        <a href="../Services/InventoryService.html" class="nav-button">ğŸ—ƒï¸ Related: Inventory Service</a>
        <a href="TransferItemViewModel.html" class="nav-button">ğŸ”„ Related: Transfer Items</a>
    </div>
</body>
</html>