<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTM Bugfix View Implementation Questionnaire</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #D13438 0%, #B71C1C 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            background: linear-gradient(135deg, #D13438 0%, #B71C1C 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: -30px -30px 30px -30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 28px;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
        }
        
        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #E1DFDD;
            border-radius: 8px;
            background: #FAFAFA;
        }
        
        .section h2 {
            color: #D13438;
            margin-top: 0;
            font-size: 22px;
            font-weight: 600;
        }
        
        .question {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 6px;
            border-left: 4px solid #D13438;
        }
        
        .question-label {
            font-weight: 600;
            color: #323130;
            margin-bottom: 10px;
            display: block;
        }
        
        .options {
            display: grid;
            gap: 8px;
            margin: 10px 0;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        
        .option:hover {
            background-color: #F3F2F1;
        }
        
        .option input[type="radio"] {
            margin-right: 10px;
            accent-color: #D13438;
        }
        
        .option input[type="checkbox"] {
            margin-right: 10px;
            accent-color: #D13438;
        }
        
        .option label {
            cursor: pointer;
            flex: 1;
        }
        
        .other-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #E1DFDD;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        .other-input:focus {
            outline: none;
            border-color: #D13438;
        }
        
        .text-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #E1DFDD;
            border-radius: 4px;
            font-size: 14px;
            min-height: 80px;
            resize: vertical;
            transition: border-color 0.2s;
        }
        
        .text-input:focus {
            outline: none;
            border-color: #D13438;
        }
        
        .actions {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #E1DFDD;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #D13438 0%, #B71C1C 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(209, 52, 56, 0.3);
        }
        
        .btn-secondary {
            background: #F3F2F1;
            color: #323130;
            border: 2px solid #E1DFDD;
        }
        
        .btn-secondary:hover {
            background: #E1DFDD;
        }
        
        .progress {
            width: 100%;
            height: 6px;
            background: #E1DFDD;
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #D13438, #B71C1C);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .validation-error {
            color: #D13438;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .required {
            color: #D13438;
        }
        
        .success-message {
            background: #DFF6DD;
            border: 2px solid #4CAF50;
            color: #2E7D31;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
            text-align: center;
        }
        
        .severity-critical { border-left-color: #B71C1C; }
        .severity-high { border-left-color: #D13438; }
        .severity-medium { border-left-color: #FF9800; }
        .severity-low { border-left-color: #4CAF50; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>MTM Bugfix View Implementation</h1>
            <p>Issue Analysis and Resolution Planning Questionnaire</p>
        </div>
        
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <form id="bugfixViewForm">
            <!-- Issue Identification Section -->
            <div class="section">
                <h2>Issue Identification</h2>
                
                <div class="question">
                    <label class="question-label">1. Which view is experiencing the issue? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="view_inventory" name="affectedView" value="inventory" required>
                            <label for="view_inventory">InventoryTabView</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="view_remove" name="affectedView" value="remove">
                            <label for="view_remove">RemoveTabView</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="view_transfer" name="affectedView" value="transfer">
                            <label for="view_transfer">TransferTabView</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="view_theme" name="affectedView" value="theme">
                            <label for="view_theme">ThemeSettingsView</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="view_transaction" name="affectedView" value="transaction">
                            <label for="view_transaction">TransactionHistoryView</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="view_other" name="affectedView" value="other">
                            <label for="view_other">Other existing view (specify below)</label>
                        </div>
                    </div>
                    <input type="text" class="other-input" id="affectedView_other_text" placeholder="Please specify the view name..." style="display: none;">
                </div>
                
                <div class="question">
                    <label class="question-label">2. What type of issue is being reported? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="issue_ui" name="issueType" value="ui" required>
                            <label for="issue_ui">UI display problem</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="issue_binding" name="issueType" value="binding">
                            <label for="issue_binding">Data binding issue</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="issue_command" name="issueType" value="command">
                            <label for="issue_command">Command not executing</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="issue_database" name="issueType" value="database">
                            <label for="issue_database">Database operation failure</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="issue_performance" name="issueType" value="performance">
                            <label for="issue_performance">Performance issue</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="issue_error" name="issueType" value="error">
                            <label for="issue_error">Error handling problem</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="issue_theme" name="issueType" value="theme">
                            <label for="issue_theme">Theme/styling issue</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="issue_validation" name="issueType" value="validation">
                            <label for="issue_validation">Validation problem</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <label class="question-label">3. What is the severity of the issue? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="severity_critical" name="issueSeverity" value="critical" required>
                            <label for="severity_critical">Critical (application crash/data loss)</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="severity_high" name="issueSeverity" value="high">
                            <label for="severity_high">High (major functionality broken)</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="severity_medium" name="issueSeverity" value="medium">
                            <label for="severity_medium">Medium (functionality impaired)</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="severity_low" name="issueSeverity" value="low">
                            <label for="severity_low">Low (cosmetic or minor usability)</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="severity_enhancement" name="issueSeverity" value="enhancement">
                            <label for="severity_enhancement">Enhancement (improvement opportunity)</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Issue Analysis Section -->
            <div class="section">
                <h2>Issue Analysis</h2>
                
                <div class="question">
                    <label class="question-label">4. When does the issue occur? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="when_startup" name="issueWhen" value="startup" required>
                            <label for="when_startup">On application startup</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="when_loading" name="issueWhen" value="loading">
                            <label for="when_loading">When loading the view</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="when_actions" name="issueWhen" value="actions">
                            <label for="when_actions">During specific user actions</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="when_entry" name="issueWhen" value="entry">
                            <label for="when_entry">After data entry</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="when_save" name="issueWhen" value="save">
                            <label for="when_save">During save operations</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="when_validation" name="issueWhen" value="validation">
                            <label for="when_validation">During validation</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="when_random" name="issueWhen" value="random">
                            <label for="when_random">Intermittently/randomly</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <label class="question-label">5. What are the specific symptoms? (Select all that apply)</label>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="symptom_crash" name="issueSymptoms" value="crash">
                            <label for="symptom_crash">Application crashes</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="symptom_errors" name="issueSymptoms" value="errors">
                            <label for="symptom_errors">Error messages displayed</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="symptom_unresponsive" name="issueSymptoms" value="unresponsive">
                            <label for="symptom_unresponsive">UI elements not responding</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="symptom_data" name="issueSymptoms" value="data">
                            <label for="symptom_data">Incorrect data display</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="symptom_performance" name="issueSymptoms" value="performance">
                            <label for="symptom_performance">Performance degradation</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="symptom_memory" name="issueSymptoms" value="memory">
                            <label for="symptom_memory">Memory leaks</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="symptom_database" name="issueSymptoms" value="database">
                            <label for="symptom_database">Database errors</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <label class="question-label">6. Is this a new issue or regression? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="type_new" name="issueClassification" value="new" required>
                            <label for="type_new">New issue never seen before</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="type_regression" name="issueClassification" value="regression">
                            <label for="type_regression">Recent regression after changes</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="type_known" name="issueClassification" value="known">
                            <label for="type_known">Long-standing known issue</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="type_environment" name="issueClassification" value="environment">
                            <label for="type_environment">Issue after environment change</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="type_dependency" name="issueClassification" value="dependency">
                            <label for="type_dependency">Issue after dependency update</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Environment and Context Section -->
            <div class="section">
                <h2>Environment and Context</h2>
                
                <div class="question">
                    <label class="question-label">7. In what environment(s) does the issue occur? (Select all that apply)</label>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="env_development" name="affectedEnvironments" value="development">
                            <label for="env_development">Development environment only</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="env_all" name="affectedEnvironments" value="all">
                            <label for="env_all">All environments</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="env_production" name="affectedEnvironments" value="production">
                            <label for="env_production">Production only</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="env_specific" name="affectedEnvironments" value="specific">
                            <label for="env_specific">Specific user machines</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="env_os" name="affectedEnvironments" value="os">
                            <label for="env_os">Specific operating systems</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="env_config" name="affectedEnvironments" value="config">
                            <label for="env_config">All configurations</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <label class="question-label">8. Are there any error logs or stack traces? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="logs_complete" name="errorLogs" value="complete" required>
                            <label for="logs_complete">Complete stack trace available</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="logs_partial" name="errorLogs" value="partial">
                            <label for="logs_partial">Partial error information</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="logs_application" name="errorLogs" value="application">
                            <label for="logs_application">Error logs from application</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="logs_database" name="errorLogs" value="database">
                            <label for="logs_database">Database error logs</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="logs_system" name="errorLogs" value="system">
                            <label for="logs_system">System event logs</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="logs_none" name="errorLogs" value="none">
                            <label for="logs_none">No error information available</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Impact Assessment Section -->
            <div class="section">
                <h2>Impact Assessment</h2>
                
                <div class="question">
                    <label class="question-label">9. Who is affected by this issue? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="affected_all" name="affectedUsers" value="all" required>
                            <label for="affected_all">All users</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="affected_roles" name="affectedUsers" value="roles">
                            <label for="affected_roles">Specific user roles</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="affected_tasks" name="affectedUsers" value="tasks">
                            <label for="affected_tasks">Users performing specific tasks</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="affected_random" name="affectedUsers" value="random">
                            <label for="affected_random">Random users</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="affected_test" name="affectedUsers" value="test">
                            <label for="affected_test">Only test users</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="affected_single" name="affectedUsers" value="single">
                            <label for="affected_single">Single user report</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <label class="question-label">10. What is the business impact? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="impact_stopped" name="businessImpact" value="stopped" required>
                            <label for="impact_stopped">Production workflow stopped</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="impact_data" name="businessImpact" value="data">
                            <label for="impact_data">Data accuracy concerns</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="impact_productivity" name="businessImpact" value="productivity">
                            <label for="impact_productivity">User productivity impact</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="impact_compliance" name="businessImpact" value="compliance">
                            <label for="impact_compliance">Compliance issues</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="impact_satisfaction" name="businessImpact" value="satisfaction">
                            <label for="impact_satisfaction">Customer satisfaction impact</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="impact_minor" name="businessImpact" value="minor">
                            <label for="impact_minor">Minor inconvenience only</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Root Cause Analysis Section -->
            <div class="section">
                <h2>Root Cause Analysis</h2>
                
                <div class="question">
                    <label class="question-label">11. What might be the root cause category? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="cause_logic" name="rootCauseCategory" value="logic" required>
                            <label for="cause_logic">Code logic error</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="cause_binding" name="rootCauseCategory" value="binding">
                            <label for="cause_binding">Data binding configuration</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="cause_database" name="rootCauseCategory" value="database">
                            <label for="cause_database">Database-related issue</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="cause_ui" name="rootCauseCategory" value="ui">
                            <label for="cause_ui">UI layout problem</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="cause_validation" name="rootCauseCategory" value="validation">
                            <label for="cause_validation">Validation logic error</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="cause_performance" name="rootCauseCategory" value="performance">
                            <label for="cause_performance">Performance bottleneck</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="cause_config" name="rootCauseCategory" value="config">
                            <label for="cause_config">Configuration issue</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="cause_external" name="rootCauseCategory" value="external">
                            <label for="cause_external">External dependency issue</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <label class="question-label">12. Are there any recent changes that might have caused this? (Select all that apply)</label>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="recent_code" name="recentChanges" value="code">
                            <label for="recent_code">Recent code changes</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="recent_database" name="recentChanges" value="database">
                            <label for="recent_database">Database schema updates</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="recent_config" name="recentChanges" value="config">
                            <label for="recent_config">Configuration changes</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="recent_dependencies" name="recentChanges" value="dependencies">
                            <label for="recent_dependencies">Dependency updates</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="recent_environment" name="recentChanges" value="environment">
                            <label for="recent_environment">Environment changes</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="recent_none" name="recentChanges" value="none">
                            <label for="recent_none">No recent changes</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Detailed Issue Documentation Section -->
            <div class="section">
                <h2>Detailed Issue Documentation</h2>
                
                <div class="question">
                    <label class="question-label">13. Provide detailed reproduction steps:</label>
                    <textarea class="text-input" name="reproductionSteps" placeholder="List the exact steps to reproduce the issue, including any specific data or conditions required..."></textarea>
                </div>
                
                <div class="question">
                    <label class="question-label">14. Describe the expected vs. actual behavior:</label>
                    <textarea class="text-input" name="behaviorDescription" placeholder="What should happen vs. what actually happens. Include screenshots or error messages if available..."></textarea>
                </div>
                
                <div class="question">
                    <label class="question-label">15. Provide any error messages, stack traces, or log entries:</label>
                    <textarea class="text-input" name="errorDetails" placeholder="Include any error messages, exception details, stack traces, or relevant log entries..."></textarea>
                </div>
                
                <div class="question">
                    <label class="question-label">16. Additional context, workarounds, or investigation notes:</label>
                    <textarea class="text-input" name="additionalContext" placeholder="Any additional information, temporary workarounds, investigation findings, or other relevant details..."></textarea>
                </div>
            </div>
            
            <div class="actions">
                <button type="button" class="btn btn-secondary" onclick="clearForm()">Clear Form</button>
                <button type="button" class="btn btn-secondary" onclick="validateForm()">Validate</button>
                <button type="button" class="btn btn-primary" onclick="saveAnswers()">Save Answers</button>
            </div>
            
            <div id="successMessage" class="success-message" style="display: none;">
                Answers saved successfully! JSON file created in docs/development/answers-json-files/
            </div>
        </form>
    </div>
    
    <script>
        // Show/hide other input fields based on radio selection
        document.addEventListener('change', function(e) {
            if (e.target.type === 'radio' && e.target.value === 'other') {
                const otherInput = document.getElementById(e.target.name + '_other_text');
                if (otherInput) {
                    otherInput.style.display = 'block';
                    otherInput.focus();
                }
                
                // Hide other inputs for the same question
                const allOtherInputs = document.querySelectorAll(`input[id*="${e.target.name}"][id*="_other_text"]`);
                allOtherInputs.forEach(input => {
                    if (input.id !== e.target.name + '_other_text') {
                        input.style.display = 'none';
                        input.value = '';
                    }
                });
            } else if (e.target.type === 'radio' && e.target.value !== 'other') {
                const otherInput = document.getElementById(e.target.name + '_other_text');
                if (otherInput) {
                    otherInput.style.display = 'none';
                    otherInput.value = '';
                }
            }
            
            // Update question styling based on severity
            if (e.target.name === 'issueSeverity') {
                updateSeverityStyles(e.target.value);
            }
            
            updateProgress();
        });
        
        function updateSeverityStyles(severity) {
            const questions = document.querySelectorAll('.question');
            questions.forEach(question => {
                question.className = `question severity-${severity}`;
            });
        }
        
        // Update progress bar
        function updateProgress() {
            const form = document.getElementById('bugfixViewForm');
            const requiredFields = form.querySelectorAll('input[required], select[required]');
            let completedFields = 0;
            
            requiredFields.forEach(field => {
                if (field.type === 'radio') {
                    const radioGroup = form.querySelectorAll(`input[name="${field.name}"]`);
                    const isChecked = Array.from(radioGroup).some(radio => radio.checked);
                    if (isChecked) completedFields++;
                } else if (field.value.trim()) {
                    completedFields++;
                }
            });
            
            const progress = (completedFields / requiredFields.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }
        
        function validateForm() {
            const form = document.getElementById('bugfixViewForm');
            const requiredFields = form.querySelectorAll('input[required], select[required]');
            let isValid = true;
            let firstInvalidField = null;
            
            // Clear previous validation errors
            document.querySelectorAll('.validation-error').forEach(error => error.remove());
            
            requiredFields.forEach(field => {
                let fieldValid = false;
                
                if (field.type === 'radio') {
                    const radioGroup = form.querySelectorAll(`input[name="${field.name}"]`);
                    fieldValid = Array.from(radioGroup).some(radio => radio.checked);
                } else {
                    fieldValid = field.value.trim() !== '';
                }
                
                if (!fieldValid) {
                    isValid = false;
                    if (!firstInvalidField) {
                        firstInvalidField = field;
                    }
                    
                    // Add validation error message
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'validation-error';
                    errorDiv.textContent = 'This field is required';
                    
                    const questionDiv = field.closest('.question');
                    if (questionDiv && !questionDiv.querySelector('.validation-error')) {
                        questionDiv.appendChild(errorDiv);
                    }
                }
            });
            
            if (isValid) {
                alert('Form is valid! All required fields are completed.');
            } else {
                alert('Please complete all required fields marked with *');
                if (firstInvalidField) {
                    firstInvalidField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
            
            return isValid;
        }
        
        function collectFormData() {
            const formData = {
                timestamp: new Date().toISOString(),
                scenario: 'bugfix-view',
                issueIdentification: {},
                issueAnalysis: {},
                environmentAndContext: {},
                impactAssessment: {},
                rootCauseAnalysis: {},
                detailedDocumentation: {}
            };
            
            const form = document.getElementById('bugfixViewForm');
            
            // Issue Identification
            formData.issueIdentification.affectedView = getRadioValue('affectedView');
            formData.issueIdentification.affectedViewOther = document.getElementById('affectedView_other_text').value;
            formData.issueIdentification.issueType = getRadioValue('issueType');
            formData.issueIdentification.issueSeverity = getRadioValue('issueSeverity');
            
            // Issue Analysis
            formData.issueAnalysis.issueWhen = getRadioValue('issueWhen');
            formData.issueAnalysis.issueSymptoms = getCheckboxValues('issueSymptoms');
            formData.issueAnalysis.issueClassification = getRadioValue('issueClassification');
            
            // Environment and Context
            formData.environmentAndContext.affectedEnvironments = getCheckboxValues('affectedEnvironments');
            formData.environmentAndContext.errorLogs = getRadioValue('errorLogs');
            
            // Impact Assessment
            formData.impactAssessment.affectedUsers = getRadioValue('affectedUsers');
            formData.impactAssessment.businessImpact = getRadioValue('businessImpact');
            
            // Root Cause Analysis
            formData.rootCauseAnalysis.rootCauseCategory = getRadioValue('rootCauseCategory');
            formData.rootCauseAnalysis.recentChanges = getCheckboxValues('recentChanges');
            
            // Detailed Documentation
            formData.detailedDocumentation.reproductionSteps = form.elements.reproductionSteps.value;
            formData.detailedDocumentation.behaviorDescription = form.elements.behaviorDescription.value;
            formData.detailedDocumentation.errorDetails = form.elements.errorDetails.value;
            formData.detailedDocumentation.additionalContext = form.elements.additionalContext.value;
            
            return formData;
        }
        
        function getRadioValue(name) {
            const radio = document.querySelector(`input[name="${name}"]:checked`);
            return radio ? radio.value : '';
        }
        
        function getCheckboxValues(name) {
            const checkboxes = document.querySelectorAll(`input[name="${name}"]:checked`);
            return Array.from(checkboxes).map(cb => cb.value);
        }
        
        function saveAnswers() {
            if (!validateForm()) {
                return;
            }
            
            const formData = collectFormData();
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            const filename = `bugfix-view-answers-${timestamp}.json`;
            
            // Create and download JSON file
            const dataStr = JSON.stringify(formData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            link.click();
            URL.revokeObjectURL(url);
            
            // Show success message
            document.getElementById('successMessage').style.display = 'block';
            setTimeout(() => {
                document.getElementById('successMessage').style.display = 'none';
            }, 5000);
        }
        
        function clearForm() {
            if (confirm('Are you sure you want to clear all form data? This action cannot be undone.')) {
                document.getElementById('bugfixViewForm').reset();
                
                // Hide all other input fields
                document.querySelectorAll('.other-input').forEach(input => {
                    input.style.display = 'none';
                    input.value = '';
                });
                
                // Clear validation errors
                document.querySelectorAll('.validation-error').forEach(error => error.remove());
                
                // Reset question styling
                document.querySelectorAll('.question').forEach(question => {
                    question.className = 'question';
                });
                
                updateProgress();
            }
        }
        
        // Initialize progress on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
        });
        
        // Update progress on any form change
        document.getElementById('bugfixViewForm').addEventListener('input', updateProgress);
        document.getElementById('bugfixViewForm').addEventListener('change', updateProgress);
    </script>
</body>
</html>
