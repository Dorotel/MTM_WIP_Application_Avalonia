<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTM Update View Implementation Questionnaire</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #106EBE 0%, #0078D4 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            background: linear-gradient(135deg, #106EBE 0%, #0078D4 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: -30px -30px 30px -30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 28px;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
        }
        
        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #E1DFDD;
            border-radius: 8px;
            background: #FAFAFA;
        }
        
        .section h2 {
            color: #106EBE;
            margin-top: 0;
            font-size: 22px;
            font-weight: 600;
        }
        
        .question {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 6px;
            border-left: 4px solid #106EBE;
        }
        
        .question-label {
            font-weight: 600;
            color: #323130;
            margin-bottom: 10px;
            display: block;
        }
        
        .options {
            display: grid;
            gap: 8px;
            margin: 10px 0;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        
        .option:hover {
            background-color: #F3F2F1;
        }
        
        .option input[type="radio"] {
            margin-right: 10px;
            accent-color: #106EBE;
        }
        
        .option input[type="checkbox"] {
            margin-right: 10px;
            accent-color: #106EBE;
        }
        
        .option label {
            cursor: pointer;
            flex: 1;
        }
        
        .other-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #E1DFDD;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        .other-input:focus {
            outline: none;
            border-color: #106EBE;
        }
        
        .text-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #E1DFDD;
            border-radius: 4px;
            font-size: 14px;
            min-height: 80px;
            resize: vertical;
            transition: border-color 0.2s;
        }
        
        .text-input:focus {
            outline: none;
            border-color: #106EBE;
        }
        
        .actions {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #E1DFDD;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #106EBE 0%, #0078D4 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(16, 110, 190, 0.3);
        }
        
        .btn-secondary {
            background: #F3F2F1;
            color: #323130;
            border: 2px solid #E1DFDD;
        }
        
        .btn-secondary:hover {
            background: #E1DFDD;
        }
        
        .progress {
            width: 100%;
            height: 6px;
            background: #E1DFDD;
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #106EBE, #0078D4);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .validation-error {
            color: #D13438;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .required {
            color: #D13438;
        }
        
        .success-message {
            background: #DFF6DD;
            border: 2px solid #4CAF50;
            color: #2E7D31;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>MTM Update View Implementation</h1>
            <p>Planning Questionnaire for Updating Existing Views</p>
        </div>
        
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <form id="updateViewForm">
            <!-- Current State Analysis Section -->
            <div class="section">
                <h2>Current State Analysis</h2>
                
                <div class="question">
                    <label class="question-label">1. Which existing view needs to be updated? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="view_inventory" name="targetView" value="inventory" required>
                            <label for="view_inventory">InventoryTabView</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="view_remove" name="targetView" value="remove">
                            <label for="view_remove">RemoveTabView</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="view_transfer" name="targetView" value="transfer">
                            <label for="view_transfer">TransferTabView</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="view_theme" name="targetView" value="theme">
                            <label for="view_theme">ThemeSettingsView</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="view_transaction" name="targetView" value="transaction">
                            <label for="view_transaction">TransactionHistoryView</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="view_other" name="targetView" value="other">
                            <label for="view_other">Other existing view (specify below)</label>
                        </div>
                    </div>
                    <input type="text" class="other-input" id="targetView_other_text" placeholder="Please specify the view name..." style="display: none;">
                </div>
                
                <div class="question">
                    <label class="question-label">2. What is the current functionality that needs modification? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="current_fields" name="currentFunctionality" value="fields" required>
                            <label for="current_fields">Data entry fields</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="current_logic" name="currentFunctionality" value="logic">
                            <label for="current_logic">Business logic processing</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="current_layout" name="currentFunctionality" value="layout">
                            <label for="current_layout">User interface layout</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="current_database" name="currentFunctionality" value="database">
                            <label for="current_database">Database operations</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="current_errors" name="currentFunctionality" value="errors">
                            <label for="current_errors">Error handling</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="current_performance" name="currentFunctionality" value="performance">
                            <label for="current_performance">Performance optimization</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="current_other" name="currentFunctionality" value="other">
                            <label for="current_other">Other (specify below)</label>
                        </div>
                    </div>
                    <input type="text" class="other-input" id="currentFunctionality_other_text" placeholder="Please specify current functionality..." style="display: none;">
                </div>
                
                <div class="question">
                    <label class="question-label">3. What is driving this update requirement? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="driver_business" name="updateDriver" value="business" required>
                            <label for="driver_business">New business requirement</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="driver_feedback" name="updateDriver" value="feedback">
                            <label for="driver_feedback">User feedback/usability improvement</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="driver_bugfix" name="updateDriver" value="bugfix">
                            <label for="driver_bugfix">Bug fix or enhancement</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="driver_performance" name="updateDriver" value="performance">
                            <label for="driver_performance">Performance improvement</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="driver_compliance" name="updateDriver" value="compliance">
                            <label for="driver_compliance">Compliance or regulatory requirement</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="driver_tech" name="updateDriver" value="tech">
                            <label for="driver_tech">Technology upgrade/modernization</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Update Requirements Section -->
            <div class="section">
                <h2>Update Requirements</h2>
                
                <div class="question">
                    <label class="question-label">4. What type of update is this? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="type_add" name="updateType" value="add" required>
                            <label for="type_add">Add new functionality to existing view</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="type_modify" name="updateType" value="modify">
                            <label for="type_modify">Modify existing functionality</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="type_ui" name="updateType" value="ui">
                            <label for="type_ui">Improve user interface/experience</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="type_optimize" name="updateType" value="optimize">
                            <label for="type_optimize">Optimize performance</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="type_fix" name="updateType" value="fix">
                            <label for="type_fix">Fix existing issues</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="type_enhance" name="updateType" value="enhance">
                            <label for="type_enhance">Enhance error handling</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="type_standards" name="updateType" value="standards">
                            <label for="type_standards">Update to new patterns/standards</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <label class="question-label">5. What specific changes are required? (Select all that apply)</label>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="change_fields" name="specificChanges" value="fields">
                            <label for="change_fields">Add new input fields</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="change_modify" name="specificChanges" value="modify">
                            <label for="change_modify">Modify existing fields</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="change_buttons" name="specificChanges" value="buttons">
                            <label for="change_buttons">Add new buttons/actions</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="change_layout" name="specificChanges" value="layout">
                            <label for="change_layout">Change layout or design</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="change_logic" name="specificChanges" value="logic">
                            <label for="change_logic">Update business logic</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="change_database" name="specificChanges" value="database">
                            <label for="change_database">Modify database operations</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="change_validation" name="specificChanges" value="validation">
                            <label for="change_validation">Improve validation</label>
                        </div>
                    </div>
                    <input type="text" class="other-input" id="change_other_text" placeholder="Please specify other changes...">
                </div>
                
                <div class="question">
                    <label class="question-label">6. Will this update require new database operations? <span class="required">*</span></label>
                    <div class="options">
                        <div class="option">
                            <input type="radio" id="db_existing" name="databaseNeeds" value="existing" required>
                            <label for="db_existing">Use existing stored procedures</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="db_modify" name="databaseNeeds" value="modify">
                            <label for="db_modify">Modify existing stored procedures (coordinate with DB team)</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="db_new" name="databaseNeeds" value="new">
                            <label for="db_new">Add new stored procedures</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="db_none" name="databaseNeeds" value="none">
                            <label for="db_none">No database changes needed</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="db_optimize" name="databaseNeeds" value="optimize">
                            <label for="db_optimize">Optimize existing database calls</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Impact Assessment Section -->
            <div class="section">
                <h2>Impact Assessment</h2>
                
                <div class="question">
                    <label class="question-label">7. What other parts of the application might be affected? (Select all that apply)</label>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="impact_viewmodels" name="impactAreas" value="viewmodels">
                            <label for="impact_viewmodels">Related ViewModels</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="impact_services" name="impactAreas" value="services">
                            <label for="impact_services">Shared services</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="impact_navigation" name="impactAreas" value="navigation">
                            <label for="impact_navigation">Navigation system</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="impact_views" name="impactAreas" value="views">
                            <label for="impact_views">Other views that use same data</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="impact_database" name="impactAreas" value="database">
                            <label for="impact_database">Database schema</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="impact_none" name="impactAreas" value="none">
                            <label for="impact_none">No other parts affected</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <label class="question-label">8. Are there any backward compatibility concerns? (Select all that apply)</label>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="compat_data" name="compatibilityConcerns" value="data">
                            <label for="compat_data">Existing data format changes</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="compat_api" name="compatibilityConcerns" value="api">
                            <label for="compat_api">API changes affecting other components</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="compat_workflow" name="compatibilityConcerns" value="workflow">
                            <label for="compat_workflow">User workflow changes</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="compat_config" name="compatibilityConcerns" value="config">
                            <label for="compat_config">Configuration changes</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="compat_none" name="compatibilityConcerns" value="none">
                            <label for="compat_none">No compatibility concerns</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Technical Implementation Section -->
            <div class="section">
                <h2>Technical Implementation</h2>
                
                <div class="question">
                    <label class="question-label">9. What patterns need to be updated or maintained? (Select all that apply)</label>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="pattern_mvvm" name="patterns" value="mvvm">
                            <label for="pattern_mvvm">MVVM Community Toolkit patterns</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="pattern_theme" name="patterns" value="theme">
                            <label for="pattern_theme">MTM theme compliance</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="pattern_error" name="patterns" value="error">
                            <label for="pattern_error">Error handling patterns</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="pattern_database" name="patterns" value="database">
                            <label for="pattern_database">Database access patterns</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="pattern_nav" name="patterns" value="nav">
                            <label for="pattern_nav">Navigation patterns</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="pattern_all" name="patterns" value="all">
                            <label for="pattern_all">All current patterns maintained</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <label class="question-label">10. What testing approach is needed? (Select all that apply)</label>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="test_unit" name="testingApproach" value="unit">
                            <label for="test_unit">Unit test updates</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="test_integration" name="testingApproach" value="integration">
                            <label for="test_integration">Integration test updates</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="test_regression" name="testingApproach" value="regression">
                            <label for="test_regression">UI regression testing</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="test_performance" name="testingApproach" value="performance">
                            <label for="test_performance">Performance testing</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="test_user" name="testingApproach" value="user">
                            <label for="test_user">User acceptance testing</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="test_database" name="testingApproach" value="database">
                            <label for="test_database">Database testing</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- UI/UX Considerations Section -->
            <div class="section">
                <h2>UI/UX Considerations</h2>
                
                <div class="question">
                    <label class="question-label">11. How will the user experience change? (Select all that apply)</label>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="ux_efficiency" name="uxChanges" value="efficiency">
                            <label for="ux_efficiency">Improved workflow efficiency</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="ux_functionality" name="uxChanges" value="functionality">
                            <label for="ux_functionality">Additional functionality available</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="ux_errors" name="uxChanges" value="errors">
                            <label for="ux_errors">Better error messages/validation</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="ux_visual" name="uxChanges" value="visual">
                            <label for="ux_visual">Enhanced visual design</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="ux_none" name="uxChanges" value="none">
                            <label for="ux_none">No significant UX changes</label>
                        </div>
                    </div>
                    <input type="text" class="other-input" id="ux_other_text" placeholder="Please specify other UX improvements...">
                </div>
                
                <div class="question">
                    <label class="question-label">12. Are there any accessibility or usability improvements? (Select all that apply)</label>
                    <div class="options">
                        <div class="option">
                            <input type="checkbox" id="access_keyboard" name="accessibilityImprovements" value="keyboard">
                            <label for="access_keyboard">Better keyboard navigation</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="access_contrast" name="accessibilityImprovements" value="contrast">
                            <label for="access_contrast">Improved color contrast</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="access_messaging" name="accessibilityImprovements" value="messaging">
                            <label for="access_messaging">Better error messaging</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="access_workflows" name="accessibilityImprovements" value="workflows">
                            <label for="access_workflows">Simplified workflows</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="access_help" name="accessibilityImprovements" value="help">
                            <label for="access_help">Enhanced tooltips/help text</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" id="access_none" name="accessibilityImprovements" value="none">
                            <label for="access_none">No accessibility changes needed</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Detailed Planning Section -->
            <div class="section">
                <h2>Detailed Planning</h2>
                
                <div class="question">
                    <label class="question-label">13. Provide a detailed description of the current state and what needs to change:</label>
                    <textarea class="text-input" name="currentStateDescription" placeholder="Describe the current functionality, what's working well, what needs improvement, and the specific changes required..."></textarea>
                </div>
                
                <div class="question">
                    <label class="question-label">14. List the specific files that will need to be modified:</label>
                    <textarea class="text-input" name="filesToModify" placeholder="List ViewModels, Views, Services, and other files that need changes (e.g., InventoryTabViewModel.cs, InventoryTabView.axaml, InventoryService.cs)..."></textarea>
                </div>
                
                <div class="question">
                    <label class="question-label">15. Describe the testing strategy and validation approach:</label>
                    <textarea class="text-input" name="testingStrategy" placeholder="Describe how you will test the changes, what existing functionality needs validation, and how you will ensure no regression..."></textarea>
                </div>
                
                <div class="question">
                    <label class="question-label">16. Any risks, dependencies, or special considerations:</label>
                    <textarea class="text-input" name="risksAndDependencies" placeholder="Describe any potential risks, dependencies on other teams/systems, rollback plans, or special deployment considerations..."></textarea>
                </div>
            </div>
            
            <div class="actions">
                <button type="button" class="btn btn-secondary" onclick="clearForm()">Clear Form</button>
                <button type="button" class="btn btn-secondary" onclick="validateForm()">Validate</button>
                <button type="button" class="btn btn-primary" onclick="saveAnswers()">Save Answers</button>
            </div>
            
            <div id="successMessage" class="success-message" style="display: none;">
                Answers saved successfully! JSON file created in docs/development/answers-json-files/
            </div>
        </form>
    </div>
    
    <script>
        // Show/hide other input fields based on radio selection
        document.addEventListener('change', function(e) {
            if (e.target.type === 'radio' && e.target.value === 'other') {
                const otherInput = document.getElementById(e.target.name + '_other_text');
                if (otherInput) {
                    otherInput.style.display = 'block';
                    otherInput.focus();
                }
                
                // Hide other inputs for the same question
                const allOtherInputs = document.querySelectorAll(`input[id*="${e.target.name}"][id*="_other_text"]`);
                allOtherInputs.forEach(input => {
                    if (input.id !== e.target.name + '_other_text') {
                        input.style.display = 'none';
                        input.value = '';
                    }
                });
            } else if (e.target.type === 'radio' && e.target.value !== 'other') {
                const otherInput = document.getElementById(e.target.name + '_other_text');
                if (otherInput) {
                    otherInput.style.display = 'none';
                    otherInput.value = '';
                }
            }
            
            updateProgress();
        });
        
        // Update progress bar
        function updateProgress() {
            const form = document.getElementById('updateViewForm');
            const requiredFields = form.querySelectorAll('input[required], select[required]');
            let completedFields = 0;
            
            requiredFields.forEach(field => {
                if (field.type === 'radio') {
                    const radioGroup = form.querySelectorAll(`input[name="${field.name}"]`);
                    const isChecked = Array.from(radioGroup).some(radio => radio.checked);
                    if (isChecked) completedFields++;
                } else if (field.value.trim()) {
                    completedFields++;
                }
            });
            
            const progress = (completedFields / requiredFields.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }
        
        function validateForm() {
            const form = document.getElementById('updateViewForm');
            const requiredFields = form.querySelectorAll('input[required], select[required]');
            let isValid = true;
            let firstInvalidField = null;
            
            // Clear previous validation errors
            document.querySelectorAll('.validation-error').forEach(error => error.remove());
            
            requiredFields.forEach(field => {
                let fieldValid = false;
                
                if (field.type === 'radio') {
                    const radioGroup = form.querySelectorAll(`input[name="${field.name}"]`);
                    fieldValid = Array.from(radioGroup).some(radio => radio.checked);
                } else {
                    fieldValid = field.value.trim() !== '';
                }
                
                if (!fieldValid) {
                    isValid = false;
                    if (!firstInvalidField) {
                        firstInvalidField = field;
                    }
                    
                    // Add validation error message
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'validation-error';
                    errorDiv.textContent = 'This field is required';
                    
                    const questionDiv = field.closest('.question');
                    if (questionDiv && !questionDiv.querySelector('.validation-error')) {
                        questionDiv.appendChild(errorDiv);
                    }
                }
            });
            
            if (isValid) {
                alert('Form is valid! All required fields are completed.');
            } else {
                alert('Please complete all required fields marked with *');
                if (firstInvalidField) {
                    firstInvalidField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
            
            return isValid;
        }
        
        function collectFormData() {
            const formData = {
                timestamp: new Date().toISOString(),
                scenario: 'update-view',
                currentStateAnalysis: {},
                updateRequirements: {},
                impactAssessment: {},
                technicalImplementation: {},
                uiUxConsiderations: {},
                detailedPlanning: {}
            };
            
            const form = document.getElementById('updateViewForm');
            
            // Current State Analysis
            formData.currentStateAnalysis.targetView = getRadioValue('targetView');
            formData.currentStateAnalysis.targetViewOther = document.getElementById('targetView_other_text').value;
            formData.currentStateAnalysis.currentFunctionality = getRadioValue('currentFunctionality');
            formData.currentStateAnalysis.currentFunctionalityOther = document.getElementById('currentFunctionality_other_text').value;
            formData.currentStateAnalysis.updateDriver = getRadioValue('updateDriver');
            
            // Update Requirements
            formData.updateRequirements.updateType = getRadioValue('updateType');
            formData.updateRequirements.specificChanges = getCheckboxValues('specificChanges');
            formData.updateRequirements.specificChangesOther = document.getElementById('change_other_text').value;
            formData.updateRequirements.databaseNeeds = getRadioValue('databaseNeeds');
            
            // Impact Assessment
            formData.impactAssessment.impactAreas = getCheckboxValues('impactAreas');
            formData.impactAssessment.compatibilityConcerns = getCheckboxValues('compatibilityConcerns');
            
            // Technical Implementation
            formData.technicalImplementation.patterns = getCheckboxValues('patterns');
            formData.technicalImplementation.testingApproach = getCheckboxValues('testingApproach');
            
            // UI/UX Considerations
            formData.uiUxConsiderations.uxChanges = getCheckboxValues('uxChanges');
            formData.uiUxConsiderations.uxChangesOther = document.getElementById('ux_other_text').value;
            formData.uiUxConsiderations.accessibilityImprovements = getCheckboxValues('accessibilityImprovements');
            
            // Detailed Planning
            formData.detailedPlanning.currentStateDescription = form.elements.currentStateDescription.value;
            formData.detailedPlanning.filesToModify = form.elements.filesToModify.value;
            formData.detailedPlanning.testingStrategy = form.elements.testingStrategy.value;
            formData.detailedPlanning.risksAndDependencies = form.elements.risksAndDependencies.value;
            
            return formData;
        }
        
        function getRadioValue(name) {
            const radio = document.querySelector(`input[name="${name}"]:checked`);
            return radio ? radio.value : '';
        }
        
        function getCheckboxValues(name) {
            const checkboxes = document.querySelectorAll(`input[name="${name}"]:checked`);
            return Array.from(checkboxes).map(cb => cb.value);
        }
        
        function saveAnswers() {
            if (!validateForm()) {
                return;
            }
            
            const formData = collectFormData();
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            const filename = `update-view-answers-${timestamp}.json`;
            
            // Create and download JSON file
            const dataStr = JSON.stringify(formData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            link.click();
            URL.revokeObjectURL(url);
            
            // Show success message
            document.getElementById('successMessage').style.display = 'block';
            setTimeout(() => {
                document.getElementById('successMessage').style.display = 'none';
            }, 5000);
        }
        
        function clearForm() {
            if (confirm('Are you sure you want to clear all form data? This action cannot be undone.')) {
                document.getElementById('updateViewForm').reset();
                
                // Hide all other input fields
                document.querySelectorAll('.other-input').forEach(input => {
                    input.style.display = 'none';
                    input.value = '';
                });
                
                // Clear validation errors
                document.querySelectorAll('.validation-error').forEach(error => error.remove());
                
                updateProgress();
            }
        }
        
        // Initialize progress on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
        });
        
        // Update progress on any form change
        document.getElementById('updateViewForm').addEventListener('input', updateProgress);
        document.getElementById('updateViewForm').addEventListener('change', updateProgress);
    </script>
</body>
</html>
