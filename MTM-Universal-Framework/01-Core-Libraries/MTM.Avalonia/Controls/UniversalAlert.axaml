<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="MTM.Avalonia.Controls.UniversalAlert"
             x:Name="UniversalAlertControl">

  <Design.PreviewWith>
    <Border Padding="20" Background="#FAFAFA">
      <StackPanel Spacing="16" Width="400">
        <UserControl AlertType="Success" Title="Operation Complete" 
                     Message="25 units of MOTOR-001 successfully added to inventory." 
                     IsClosable="True" />
        
        <UserControl AlertType="Warning" Title="Low Stock Alert" 
                     Message="BEARING-005 quantity is below minimum threshold (5/10 units)." />
        
        <UserControl AlertType="Error" Title="Database Connection Failed" 
                     Message="Unable to connect to inventory database. Please check network connection." 
                     ActionText="Retry Connection" />
        
        <UserControl AlertType="Info" Title="System Maintenance" 
                     Message="Scheduled maintenance window: Tonight 11 PM - 2 AM EST." />
      </StackPanel>
    </Border>
  </Design.PreviewWith>

  <UserControl.Styles>
    <!-- Base alert styles -->
    <Style Selector="Border.alert">
      <Setter Property="BorderThickness" Value="1" />
      <Setter Property="CornerRadius" Value="6" />
      <Setter Property="Padding" Value="16" />
      <Setter Property="Margin" Value="0,0,0,8" />
    </Style>

    <!-- Success alert -->
    <Style Selector="Border.alert.success">
      <Setter Property="Background" Value="#F3FDF3" />
      <Setter Property="BorderBrush" Value="#107C10" />
    </Style>

    <!-- Warning alert -->
    <Style Selector="Border.alert.warning">
      <Setter Property="Background" Value="#FFF8F0" />
      <Setter Property="BorderBrush" Value="#FFB900" />
    </Style>

    <!-- Error alert -->
    <Style Selector="Border.alert.error">
      <Setter Property="Background" Value="#FDF3F4" />
      <Setter Property="BorderBrush" Value="#D13438" />
    </Style>

    <!-- Info alert -->
    <Style Selector="Border.alert.info">
      <Setter Property="Background" Value="#F3F8FD" />
      <Setter Property="BorderBrush" Value="#0078D4" />
    </Style>

    <!-- Icon styles -->
    <Style Selector="TextBlock.alert-icon">
      <Setter Property="FontSize" Value="20" />
      <Setter Property="FontWeight" Value="Bold" />
      <Setter Property="Margin" Value="0,0,12,0" />
      <Setter Property="VerticalAlignment" Value="Top" />
    </Style>

    <Style Selector="TextBlock.alert-icon.success">
      <Setter Property="Foreground" Value="#107C10" />
      <Setter Property="Text" Value="✓" />
    </Style>

    <Style Selector="TextBlock.alert-icon.warning">
      <Setter Property="Foreground" Value="#FFB900" />
      <Setter Property="Text" Value="⚠" />
    </Style>

    <Style Selector="TextBlock.alert-icon.error">
      <Setter Property="Foreground" Value="#D13438" />
      <Setter Property="Text" Value="✕" />
    </Style>

    <Style Selector="TextBlock.alert-icon.info">
      <Setter Property="Foreground" Value="#0078D4" />
      <Setter Property="Text" Value="ℹ" />
    </Style>

    <!-- Title styles -->
    <Style Selector="TextBlock.alert-title">
      <Setter Property="FontWeight" Value="SemiBold" />
      <Setter Property="FontSize" Value="14" />
      <Setter Property="Margin" Value="0,0,0,4" />
    </Style>

    <Style Selector="TextBlock.alert-title.success">
      <Setter Property="Foreground" Value="#0E5A0E" />
    </Style>

    <Style Selector="TextBlock.alert-title.warning">
      <Setter Property="Foreground" Value="#B8860B" />
    </Style>

    <Style Selector="TextBlock.alert-title.error">
      <Setter Property="Foreground" Value="#A4262C" />
    </Style>

    <Style Selector="TextBlock.alert-title.info">
      <Setter Property="Foreground" Value="#106EBE" />
    </Style>

    <!-- Message styles -->
    <Style Selector="TextBlock.alert-message">
      <Setter Property="FontSize" Value="13" />
      <Setter Property="Foreground" Value="#323130" />
      <Setter Property="TextWrapping" Value="Wrap" />
      <Setter Property="LineHeight" Value="20" />
    </Style>

    <!-- Close button styles -->
    <Style Selector="Button.alert-close">
      <Setter Property="Background" Value="Transparent" />
      <Setter Property="BorderThickness" Value="0" />
      <Setter Property="Padding" Value="4" />
      <Setter Property="Margin" Value="8,-8,-8,-8" />
      <Setter Property="FontSize" Value="16" />
      <Setter Property="Foreground" Value="#605E5C" />
      <Setter Property="VerticalAlignment" Value="Top" />
      <Setter Property="HorizontalAlignment" Value="Right" />
    </Style>

    <Style Selector="Button.alert-close:pointerover">
      <Setter Property="Background" Value="#00000010" />
    </Style>

    <!-- Action button styles -->
    <Style Selector="Button.alert-action">
      <Setter Property="Margin" Value="0,8,0,0" />
      <Setter Property="Padding" Value="12,6" />
      <Setter Property="FontSize" Value="13" />
      <Setter Property="FontWeight" Value="Medium" />
    </Style>

    <Style Selector="Button.alert-action.success">
      <Setter Property="Background" Value="#107C10" />
      <Setter Property="Foreground" Value="White" />
      <Setter Property="BorderBrush" Value="#107C10" />
    </Style>

    <Style Selector="Button.alert-action.warning">
      <Setter Property="Background" Value="#FFB900" />
      <Setter Property="Foreground" Value="Black" />
      <Setter Property="BorderBrush" Value="#FFB900" />
    </Style>

    <Style Selector="Button.alert-action.error">
      <Setter Property="Background" Value="#D13438" />
      <Setter Property="Foreground" Value="White" />
      <Setter Property="BorderBrush" Value="#D13438" />
    </Style>

    <Style Selector="Button.alert-action.info">
      <Setter Property="Background" Value="#0078D4" />
      <Setter Property="Foreground" Value="White" />
      <Setter Property="BorderBrush" Value="#0078D4" />
    </Style>
  </UserControl.Styles>

  <Border x:Name="AlertContainer" Classes="alert">
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
      </Grid.ColumnDefinitions>

      <!-- Alert icon -->
      <TextBlock x:Name="AlertIcon"
                 Grid.Column="0"
                 Classes="alert-icon" />

      <!-- Content area -->
      <StackPanel Grid.Column="1">
        <!-- Title -->
        <TextBlock x:Name="AlertTitle"
                   Text="{Binding Title, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}"
                   Classes="alert-title"
                   IsVisible="{Binding Title, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />

        <!-- Message -->
        <TextBlock x:Name="AlertMessage"
                   Text="{Binding Message, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}"
                   Classes="alert-message" />

        <!-- Action button -->
        <Button x:Name="ActionButton"
                Content="{Binding ActionText, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}"
                Command="{Binding ActionCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}"
                Classes="alert-action"
                IsVisible="{Binding ActionText, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
      </StackPanel>

      <!-- Close button -->
      <Button x:Name="CloseButton"
              Grid.Column="2"
              Content="✕"
              Classes="alert-close"
              Command="{Binding CloseCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}"
              IsVisible="{Binding IsClosable, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}" />
    </Grid>
  </Border>

</UserControl>