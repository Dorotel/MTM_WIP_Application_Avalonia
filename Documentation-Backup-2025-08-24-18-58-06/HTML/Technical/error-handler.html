<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTM WIP Application - Error Handling</title>
    <link rel="stylesheet" href="../assets/css/modern-styles.css">
    <link rel="stylesheet" href="../assets/css/mtm-theme.css">
</head>
<body>
    <div class="layout">
        <aside class="layout-sidebar mtm-nav">
            <div class="mtm-nav-brand">
                <div class="mtm-nav-brand-icon">üìä</div>
                <h1 class="mtm-nav-brand-title">MTM WIP</h1>
                <p class="mtm-nav-brand-subtitle">Technical Documentation</p>
            </div>
            <nav class="nav">
                <section class="mtm-nav-section">
                    <h2 class="mtm-nav-section-title">Core Documentation</h2>
                    <ul class="nav-links">
                        <li><a href="index.html" class="mtm-nav-link">üè† Documentation Hub</a></li>
                        <li><a href="coding-conventions.html" class="mtm-nav-link">üìù Coding Conventions</a></li>
                        <li><a href="ui-generation.html" class="mtm-nav-link">üñ•Ô∏è UI Generation</a></li>
                        <li><a href="error-handler.html" class="mtm-nav-link is-active">‚ö†Ô∏è Error Handling</a></li>
                    </ul>
                </section>
            </nav>
        </aside>
        
        <div class="layout-content">
            <header class="header">
                <div class="header-brand">
                    <span class="icon">‚ö†Ô∏è</span>
                    <span>Error Handling Guide</span>
                </div>
            </header>
            
            <main id="main-content" class="main">
                <section class="mtm-hero">
                    <h1 class="mtm-hero-title">MTM Error Handling</h1>
                    <p class="mtm-hero-subtitle">Comprehensive error handling patterns and standardized error management</p>
                </section>
                
                <section class="mtm-slide-up">
                    <div class="mtm-card">
                        <div class="mtm-card-header">
                            <div class="mtm-card-icon">üõ°Ô∏è</div>
                            <h3 class="mtm-card-title">Error Handling Principles</h3>
                        </div>
                        <div class="mtm-card-content">
                            <ul>
                                <li><strong>Standardized Error Codes:</strong> Consistent error code system across all components</li>
                                <li><strong>User-Friendly Messages:</strong> Clear, actionable error messages for end users</li>
                                <li><strong>Centralized Logging:</strong> All errors logged to central system with context</li>
                                <li><strong>Graceful Degradation:</strong> System continues to function when non-critical errors occur</li>
                                <li><strong>Database Error Handling:</strong> Standardized patterns for stored procedure error handling</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section class="mtm-slide-up">
                    <div class="mtm-card">
                        <div class="mtm-card-header">
                            <div class="mtm-card-icon">üìã</div>
                            <h3 class="mtm-card-title">Error Code Standards</h3>
                        </div>
                        <div class="mtm-card-content">
                            <div class="mtm-code">
// MTM Error Code Format: MTM-[COMPONENT]-[NUMBER]
// Examples:
MTM-DB-001    // Database connection error
MTM-DB-002    // Stored procedure execution error
MTM-UI-001    // UI component initialization error
MTM-BL-001    // Business logic validation error
MTM-SRV-001   // Service layer error
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mtm-slide-up">
                    <div class="mtm-card">
                        <div class="mtm-card-header">
                            <div class="mtm-card-icon">üíæ</div>
                            <h3 class="mtm-card-title">Database Error Handling</h3>
                        </div>
                        <div class="mtm-card-content">
                            <h4>Stored Procedure Error Pattern</h4>
                            <div class="mtm-code">
-- Standard stored procedure error handling
BEGIN TRY
    -- Procedure logic here
    
    SELECT 'SUCCESS' as Status, 'Operation completed successfully' as Message;
END TRY
BEGIN CATCH
    SELECT 'ERROR' as Status, 
           CONCAT('MTM-DB-', ERROR_NUMBER(), ': ', ERROR_MESSAGE()) as Message;
END CATCH
                            </div>

                            <h4>C# Error Handling for Database Calls</h4>
                            <div class="mtm-code">
try
{
    var result = await Helper_Database_StoredProcedure.ExecuteDataTableWithStatus(
        connectionString, procedureName, parameters);
    
    if (result.Status == "ERROR")
    {
        Logger.LogError("Database error: {Message}", result.Message);
        return Result.Failure(result.Message);
    }
    
    return Result.Success(result.Data);
}
catch (Exception ex)
{
    Logger.LogError(ex, "Unexpected error calling stored procedure {ProcedureName}", procedureName);
    return Result.Failure($"MTM-DB-999: Unexpected database error");
}
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mtm-slide-up">
                    <div class="mtm-card">
                        <div class="mtm-card-header">
                            <div class="mtm-card-icon">‚ö°</div>
                            <h3 class="mtm-card-title">ReactiveUI Error Handling</h3>
                        </div>
                        <div class="mtm-card-content">
                            <div class="mtm-code">
public class SampleViewModel : ReactiveObject
{
    public ReactiveCommand&lt;Unit, Unit&gt; LoadDataCommand { get; }
    
    public SampleViewModel()
    {
        LoadDataCommand = ReactiveCommand.CreateFromTask(LoadDataAsync);
        
        // Centralized error handling for all commands
        LoadDataCommand.ThrownExceptions
            .Subscribe(ex =>
            {
                Logger.LogError(ex, "Error in LoadDataCommand");
                ShowUserFriendlyError("Unable to load data. Please try again.");
            });
    }
    
    private async Task LoadDataAsync()
    {
        try
        {
            // Load data logic
        }
        catch (Exception ex)
        {
            // Re-throw to be caught by command error handler
            throw;
        }
    }
    
    private void ShowUserFriendlyError(string message)
    {
        // Display error to user through UI
        ErrorMessage = message;
        IsErrorVisible = true;
    }
}
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>
    
    <script src="../assets/js/modern-features.js"></script>
</body>
</html>