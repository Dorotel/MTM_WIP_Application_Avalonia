@startuml Instruction Files Relationships - VERIFIED
!theme plain
skinparam backgroundColor #FFFFFF
skinparam defaultFontName Arial
skinparam defaultFontSize 10

' MTM Colors
skinparam component {
  BackgroundColor #F8F9FA
  BorderColor #6a0dad
  FontColor #333333
}

skinparam package {
  BackgroundColor #EDE7F6
  BorderColor #6a0dad
  FontColor #333333
}

skinparam arrow {
  Color #6a0dad
  FontColor #333333
}

title MTM WIP Application - Instruction Files Relationship Diagram (VERIFIED)

' Main entry point
component "copilot-instructions.md" as main #FFD700 {
  note bottom : Main entry point\nReferences all categories\n✅ VERIFIED
}

' Core Infrastructure Package
package "Core Infrastructure" as core #E8F5E8 {
  component "dependency-injection.instruction.md" as di
  component "codingconventions.instruction.md" as coding
  component "project-structure.instruction.md" as structure
  component "naming.conventions.instruction.md" as naming
}

' Development Instructions Package  
package "Development Instructions" as dev #E8E8FF {
  component "database-patterns.instruction.md" as dbpatterns
  component "errorhandler.instruction.md" as error
}

' UI Instructions Package
package "UI Instructions" as ui #FFE8E8 {
  component "avalonia-xaml-syntax.instruction.md" as avln #FF6B6B {
    note bottom : CRITICAL for\nAVLN2000 prevention\n✅ VERIFIED LINKS
  }
  component "ui-generation.instruction.md" as uigen
  component "ui-mapping.instruction.md" as uimap
  component "ui-styling.instruction.md" as uistyle
}

' Custom Prompts Package (Verified UI Prompts Only)
package "Custom Prompts (Verified)" as prompts #FFF0F5 {
  component "CustomPrompt_Create_UIElement.md" as uielement #FFCCCB {
    note right : ✅ VERIFIED\navln reference
  }
  component "CustomPrompt_Create_UIElementFromMarkdown.md" as uimarkdown #FFCCCB
  component "CustomPrompt_Create_ModernLayoutPattern.md" as modernlayout #FFCCCB
}

' Other files mentioned but not fully verified
package "Other Referenced Files" as other #F5F5F5 {
  component "missing-components.instruction.md" as missing
  component "Various README files" as readmes
  component "Other custom prompts" as otherprompts
}

' VERIFIED RELATIONSHIPS

' Main relationships from copilot-instructions.md (VERIFIED)
main -[#00AA00,bold]-> core : ✅ VERIFIED references
main -[#00AA00,bold]-> ui : ✅ VERIFIED references  
main -[#00AA00,bold]-> dev : ✅ VERIFIED references
main -[#00AA00,bold]-> missing : ✅ VERIFIED reference

' CRITICAL AVLN2000 Prevention Relationships (ALL VERIFIED)
main -[#FF0000,bold,thickness=3]-> avln : ✅ CRITICAL reference
uigen -[#FF0000,bold,thickness=3]-> avln : ✅ BEFORE any AXAML
uimap -[#FF0000,bold,thickness=3]-> avln : ✅ BEFORE mapping
uistyle -[#FF0000,bold,thickness=3]-> avln : ✅ BEFORE styling
uielement -[#FF0000,bold,thickness=3]-> avln : ✅ BEFORE UI creation
uimarkdown -[#FF0000,bold,thickness=3]-> avln : ✅ BEFORE markdown parsing
modernlayout -[#FF0000,bold,thickness=3]-> avln : ✅ BEFORE layout creation

' Known internal relationships within UI Instructions
uigen --> uimap : likely references
uigen --> uistyle : likely references

' Custom Prompts verified relationships
uielement --> uigen : references UI generation
uielement --> uimap : references mapping
uimarkdown --> uigen : references UI generation
modernlayout --> uigen : references UI generation

' Other relationships (not fully verified)
main -.-> other : references various\n(not fully verified)

legend right
  |Color/Style| Description |
  |<#FFD700>| Main Entry Point |
  |<#FF6B6B>| CRITICAL AVLN2000 Prevention |
  |<#FFCCCB>| UI Prompts with verified AVLN2000 links |
  |<#FF0000,bold,thickness=3>| ✅ VERIFIED critical prevention links |
  |<#00AA00,bold>| ✅ VERIFIED references |
  |<back:white>| ✅ VERIFIED existing files |
  |-.->| Likely but not verified relationships |
  |<#E8F5E8>| Core Infrastructure |
  |<#FFE8E8>| UI Instructions |
  |<#E8E8FF>| Development Instructions |
  |<#FFF0F5>| Verified Custom Prompts |
  |<#F5F5F5>| Other Referenced Files |
endlegend

note top of main
  ✅ VERIFICATION STATUS: PASSING
  All critical AVLN2000 prevention links verified
  Main instruction file properly references all categories
end note

note bottom of avln
  ✅ AVLN2000 Prevention System VERIFIED
  - Referenced by main copilot-instructions.md
  - Referenced by ALL UI instruction files
  - Referenced by ALL UI custom prompts
  - Proper implementation confirmed
end note

note right of prompts
  ✅ These UI prompts have been
  verified to properly reference
  the AVLN2000 prevention guide
end note

' Verification status box
rectangle "VERIFICATION REPORT" as verify #FFFFCC {
  note as verifydetails
    ✅ **CRITICAL SYSTEM VERIFIED**
    
    **AVLN2000 Prevention Links:**
    • copilot-instructions.md → avalonia-xaml-syntax.instruction.md ✅
    • ui-generation.instruction.md → avalonia-xaml-syntax.instruction.md ✅
    • ui-mapping.instruction.md → avalonia-xaml-syntax.instruction.md ✅
    • ui-styling.instruction.md → avalonia-xaml-syntax.instruction.md ✅
    • All UI custom prompts → avalonia-xaml-syntax.instruction.md ✅
    
    **File Existence Verified:**
    • All Core Infrastructure files exist ✅
    • All UI Instruction files exist ✅  
    • Key Development Instruction files exist ✅
    • All verified custom prompts exist ✅
    
    **Link Integrity: CONFIRMED** ✅
  end note
}

@enduml
