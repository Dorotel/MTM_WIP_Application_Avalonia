<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:MTM_WIP_Application_Avalonia.ViewModels"
             mc:Ignorable="d"
             d:DesignWidth="800"
             d:DesignHeight="600"
             x:Class="MTM_WIP_Application_Avalonia.Views.InventoryTabView"
             x:CompileBindings="True"
             x:DataType="vm:InventoryTabViewModel">

  <UserControl.Styles>
    <!-- Input field styles -->
    <Style Selector="ComboBox.input-field">
      <Setter Property="Margin" Value="4"/>
      <Setter Property="Padding" Value="8,4"/>
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
      <Setter Property="Background" Value="{DynamicResource CardBackgroundBrush}"/>
    </Style>
    <Style Selector="ComboBox.input-field.error">
      <Setter Property="BorderBrush" Value="Red"/>
      <Setter Property="Background" Value="#FFEEEE"/>
    </Style>
    
    <Style Selector="TextBox.input-field">
      <Setter Property="Margin" Value="4"/>
      <Setter Property="Padding" Value="8,4"/>
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
      <Setter Property="Background" Value="{DynamicResource CardBackgroundBrush}"/>
    </Style>
    <Style Selector="TextBox.input-field.error">
      <Setter Property="BorderBrush" Value="Red"/>
      <Setter Property="Background" Value="#FFEEEE"/>
    </Style>

    <!-- Label styles -->
    <Style Selector="TextBlock.field-label">
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="FontWeight" Value="Medium"/>
      <Setter Property="VerticalAlignment" Value="Center"/>
      <Setter Property="Margin" Value="4,0"/>
      <Setter Property="HorizontalAlignment" Value="Right"/>
    </Style>

    <!-- Button styles -->
    <Style Selector="Button.action-button">
      <Setter Property="Padding" Value="12,6"/>
      <Setter Property="Margin" Value="4"/>
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="FontWeight" Value="Medium"/>
      <Setter Property="CornerRadius" Value="4"/>
      <Setter Property="MinWidth" Value="80"/>
    </Style>
    
    <Style Selector="Button.primary">
      <Setter Property="Background" Value="#4B45ED"/>
      <Setter Property="Foreground" Value="White"/>
      <Setter Property="BorderBrush" Value="#4B45ED"/>
    </Style>
    <Style Selector="Button.primary:pointerover">
      <Setter Property="Background" Value="#BA45ED"/>
    </Style>
    <Style Selector="Button.primary:disabled">
      <Setter Property="Background" Value="{DynamicResource BorderBrush}"/>
      <Setter Property="Foreground" Value="Gray"/>
    </Style>

    <Style Selector="Button.secondary">
      <Setter Property="Background" Value="{DynamicResource BorderBrush}"/>
      <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}"/>
      <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
    </Style>
    <Style Selector="Button.secondary:pointerover">
      <Setter Property="Background" Value="{DynamicResource AccentBrush}"/>
      <Setter Property="Foreground" Value="White"/>
    </Style>
  </UserControl.Styles>

  <!-- Main container with GroupBox styling -->
  <Border Background="{DynamicResource CardBackgroundBrush}"
          BorderBrush="{DynamicResource BorderBrush}"
          BorderThickness="1"
          CornerRadius="4"
          Padding="8">
    <Grid RowDefinitions="Auto,*,Auto,Auto,Auto">
      
      <!-- Header -->
      <TextBlock Grid.Row="0"
                 Text="Inventory Entry"
                 FontSize="14"
                 FontWeight="SemiBold"
                 Margin="8,4"
                 Foreground="{DynamicResource ForegroundBrush}"/>
      
      <!-- Main input fields area -->
      <Grid Grid.Row="1" 
            RowDefinitions="Auto,Auto,Auto,Auto,Auto,*"
            ColumnDefinitions="Auto, *"
            Margin="8">
        
        <!-- Part Number -->
        <TextBlock Grid.Row="0" Grid.Column="0"
                   Classes="field-label"
                   Text="Part Number:"/>
        <ComboBox Grid.Row="0" Grid.Column="1"
				  PlaceholderText="Select Part ID"
                  Classes="input-field" 
                  x:Name="PartComboBox"
				  HorizontalAlignment="Stretch"
                  ItemsSource="{Binding PartOptions}"
                  SelectedItem="{Binding SelectedPart, Mode=TwoWay}"
                  IsTextSearchEnabled="True"
                  ToolTip.Tip="Select or enter a part number"/>

        <!-- Operation -->
        <TextBlock Grid.Row="1" Grid.Column="0"
                   Classes="field-label"
                   Text="Operation:"/>
        <ComboBox Grid.Row="1" Grid.Column="1" 
				  HorizontalAlignment="Stretch"
                  Classes="input-field"
				  PlaceholderText="Select Operation"
                  x:Name="OperationComboBox"
                  ItemsSource="{Binding OperationOptions}"
                  SelectedItem="{Binding SelectedOperation, Mode=TwoWay}"
                  ToolTip.Tip="Select an operation number"/>

        <!-- Quantity -->
        <TextBlock Grid.Row="2" Grid.Column="0"
                   Classes="field-label"
                   Text="Quantity:"/>
        <TextBox Grid.Row="2" Grid.Column="1"
                 Classes="input-field"
				 HorizontalAlignment="Stretch"
                 x:Name="QuantityTextBox"
                 Text="{Binding Quantity, Mode=TwoWay}"
                 Watermark="Enter quantity"
                 ToolTip.Tip="Enter numeric quantity"/>

        <!-- Location -->
        <TextBlock Grid.Row="3" Grid.Column="0"
                   Classes="field-label"
                   Text="Location:"/>
        <ComboBox Grid.Row="3" Grid.Column="1"
                  Classes="input-field"
				  PlaceholderText="Select Location"
				  HorizontalAlignment="Stretch"
                  x:Name="LocationComboBox"
                  ItemsSource="{Binding LocationOptions}"
                  SelectedItem="{Binding SelectedLocation, Mode=TwoWay}"
                  ToolTip.Tip="Select a location"/>

        <!-- Notes section header -->
        <TextBlock Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2"
                   Text="Notes"
                   FontSize="12"
                   FontWeight="Medium"
                   Margin="4,8,4,4"
                   HorizontalAlignment="Center"/>

        <!-- Notes text area -->
        <TextBox Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="2"
                 x:Name="NotesTextBox"
                 Text="{Binding Notes, Mode=TwoWay}"
                 AcceptsReturn="True"
                 TextWrapping="Wrap"
                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                 Margin="4"
                 MinHeight="120"
                 Watermark="Enter additional notes (optional)"
                 Background="{DynamicResource CardBackgroundBrush}"
                 BorderBrush="{DynamicResource BorderBrush}"
                 BorderThickness="1"/>
      </Grid>

      <!-- Action buttons row -->
      <Grid Grid.Row="2" 
            ColumnDefinitions="Auto,Auto,*,Auto,Auto"
            Margin="8,4">
        
        <Button Grid.Column="0"
                Classes="action-button primary"
                Content="Save"
                Command="{Binding SaveCommand}"
                IsEnabled="{Binding CanSave}"
                ToolTip.Tip="Save inventory item (Enter)"/>

        <Button Grid.Column="1"
                Classes="action-button secondary"
                Content="Advanced"
                Command="{Binding AdvancedEntryCommand}"
                ToolTip.Tip="Open advanced inventory features"/>

        <!-- Version display -->
        <TextBlock Grid.Column="2"
                   Text="{Binding VersionText}"
                   FontSize="10"
                   Opacity="0.7"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Center"
                   Margin="8,0"/>

        <Button Grid.Column="3"
                Classes="action-button secondary"
                Content="Reset"
                Command="{Binding ResetCommand}"
                ToolTip.Tip="Reset form (F5) / Hard reset (Shift+F5)"/>

        <Button Grid.Column="4"
                Classes="action-button secondary"
                Content="âš™"
                Command="{Binding TogglePanelCommand}"
                ToolTip.Tip="Toggle right panel"
                FontSize="14"
                MinWidth="36"/>
      </Grid>

      <!-- Keyboard shortcuts info -->
      <TextBlock Grid.Row="3"
                 Text="F5: Reset | Enter: Next field | Escape: Cancel | Shift+F5: Hard reset"
                 FontSize="10"
                 Opacity="0.6"
                 HorizontalAlignment="Center"
                 Margin="8,4"/>
    </Grid>
  </Border>
</UserControl>