<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:MTM_WIP_Application_Avalonia.ViewModels.MainForm"
             xmlns:controls="using:MTM_WIP_Application_Avalonia.Controls"
             xmlns:material="using:Material.Icons.Avalonia"
             mc:Ignorable="d"
             d:DesignWidth="1000"
             d:DesignHeight="700"
             x:Class="MTM_WIP_Application_Avalonia.Views.MainForm.TestControlsView"
             x:CompileBindings="True"
             x:DataType="vm:TestControlsViewModel">

  <UserControl.Resources>
    <!-- MTM Color Scheme -->
    <SolidColorBrush x:Key="PrimaryBrush" Color="#FFD700"/>           <!-- Gold -->
    <SolidColorBrush x:Key="PrimaryDarkBrush" Color="#DAA520"/>       <!-- Dark Gold -->
    <SolidColorBrush x:Key="SecondaryBrush" Color="#F5F5DC"/>         <!-- Beige -->
    <SolidColorBrush x:Key="AccentBrush" Color="#4169E1"/>            <!-- Royal Blue -->
    <SolidColorBrush x:Key="BorderBrush" Color="#E0E0E0"/>            <!-- Light Gray -->
    <SolidColorBrush x:Key="CardBrush" Color="#FFFFFF"/>              <!-- White -->
    <SolidColorBrush x:Key="HeaderBrush" Color="#F8F9FA"/>            <!-- Light Gray -->
  </UserControl.Resources>

  <Grid RowDefinitions="Auto,*,Auto" Margin="16">
    
    <!-- Header with Test Control Buttons -->
    <Border Grid.Row="0"
            Background="{StaticResource HeaderBrush}"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="8"
            Padding="16,12"
            Margin="0,0,0,16">
      
      <Grid ColumnDefinitions="Auto,*,Auto">
        <!-- Title -->
        <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12">
          <material:MaterialIcon Kind="TestTube" 
                                Width="24" Height="24" 
                                Foreground="{StaticResource AccentBrush}"
                                VerticalAlignment="Center" />
          <TextBlock Text="MTM Custom Controls Test Lab"
                     FontSize="18"
                     FontWeight="SemiBold"
                     Foreground="#333"
                     VerticalAlignment="Center" />
        </StackPanel>

        <!-- Status -->
        <TextBlock Grid.Column="1"
                   Text="{Binding StatusMessage}"
                   FontSize="12"
                   Foreground="#666"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Center"
                   TextWrapping="Wrap" />

        <!-- Control Buttons -->
        <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
          <Button Content="📋 Sample Data"
                  Command="{Binding LoadSampleDataCommand}"
                  Background="{StaticResource PrimaryBrush}"
                  Foreground="White"
                  Padding="12,6"
                  CornerRadius="4"
                  ToolTip.Tip="Load sample MTM data" />
          
          <Button Content="🔄 Toggle State"
                  Command="{Binding ToggleEnabledCommand}"
                  Background="{StaticResource AccentBrush}"
                  Foreground="White"
                  Padding="12,6"
                  CornerRadius="4"
                  ToolTip.Tip="Enable/Disable all controls" />
          
          <Button Content="❌ Clear All"
                  Command="{Binding ClearAllCommand}"
                  Background="#DC3545"
                  Foreground="White"
                  Padding="12,6"
                  CornerRadius="4"
                  ToolTip.Tip="Clear all field values" />
          
          <Button Content="💾 Save All"
                  Command="{Binding SaveAllCommand}"
                  Background="#28A745"
                  Foreground="White"
                  Padding="12,6"
                  CornerRadius="4"
                  ToolTip.Tip="Save all data" />
        </StackPanel>
      </Grid>
    </Border>

    <!-- Main Content - Scrollable -->
    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
      <StackPanel Spacing="24">
        
        <!-- MTMComboBox Section -->
        <Border Background="{StaticResource CardBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="20"
                BoxShadow="0 2 8 0 #11000000">
          
          <StackPanel Spacing="16">
            <!-- Section Header -->
            <Grid ColumnDefinitions="Auto,*,Auto">
              <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8">
                <material:MaterialIcon Kind="FormatListBulleted" 
                                      Width="20" Height="20" 
                                      Foreground="{StaticResource PrimaryBrush}"
                                      VerticalAlignment="Center" />
                <TextBlock Text="MTMComboBox Controls"
                           FontSize="16"
                           FontWeight="SemiBold"
                           VerticalAlignment="Center" />
              </StackPanel>
              
              <Button Grid.Column="2"
                      Content="Populate Locations"
                      Command="{Binding PopulateComboCommand}"
                      Background="Transparent"
                      BorderBrush="{StaticResource PrimaryBrush}"
                      BorderThickness="1"
                      Padding="8,4"
                      CornerRadius="4" />
            </Grid>

            <!-- ComboBox Examples -->
            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto" ColumnSpacing="20" RowSpacing="16">
              
              <!-- Standard ComboBox -->
              <StackPanel Grid.Column="0" Grid.Row="0" Spacing="8">
                <TextBlock Text="Standard ComboBox with Icon"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMComboBox
                  Label="Manufacturing Location"
                  Icon="Factory"
                  PlaceholderText="Select a location..."
                  Items="{Binding TestItems}"
                  SelectedItem="{Binding SelectedComboItem}"
                  IsRequired="True"
                  IsEnabled="{Binding ControlsEnabled}" />
              </StackPanel>

              <!-- ComboBox with Validation -->
              <StackPanel Grid.Column="1" Grid.Row="0" Spacing="8">
                <TextBlock Text="ComboBox with Validation States"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMComboBox
                  Label="Operation Code"
                  Icon="Cog"
                  PlaceholderText="Select operation..."
                  IsRequired="True"
                  IsEnabled="{Binding ControlsEnabled}"
                  HasValidationError="{Binding ShowValidationErrors}"
                  ValidationMessage="Operation code is required for inventory tracking"
                  Items="{Binding OperationCodes}" />
              </StackPanel>

              <!-- Disabled ComboBox -->
              <StackPanel Grid.Column="0" Grid.Row="1" Spacing="8">
                <TextBlock Text="Read-Only ComboBox"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMComboBox
                  Label="System Status"
                  Icon="Information"
                  SelectedItem="System Online - Normal Operation"
                  IsEnabled="False"
                  ShowClearButton="False"
                  Items="{Binding SystemStatusOptions}" />
              </StackPanel>

              <!-- Success State ComboBox -->
              <StackPanel Grid.Column="1" Grid.Row="1" Spacing="8">
                <TextBlock Text="Success State ComboBox"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMComboBox
                  Label="Quality Status"
                  Icon="CheckCircle"
                  SelectedItem="Passed - Quality Approved"
                  ShowStatusIcon="True"
                  IsEnabled="{Binding ControlsEnabled}"
                  Items="{Binding QualityStatusOptions}" />
              </StackPanel>
            </Grid>
          </StackPanel>
        </Border>

        <!-- MTMTextBox Section -->
        <Border Background="{StaticResource CardBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="20"
                BoxShadow="0 2 8 0 #11000000">
          
          <StackPanel Spacing="16">
            <!-- Section Header -->
            <StackPanel Orientation="Horizontal" Spacing="8">
              <material:MaterialIcon Kind="TextBox" 
                                    Width="20" Height="20" 
                                    Foreground="{StaticResource PrimaryBrush}"
                                    VerticalAlignment="Center" />
              <TextBlock Text="MTMTextBox Controls"
                         FontSize="16"
                         FontWeight="SemiBold"
                         VerticalAlignment="Center" />
            </StackPanel>

            <!-- TextBox Examples -->
            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto" ColumnSpacing="20" RowSpacing="16">
              
              <!-- Standard TextBox -->
              <StackPanel Grid.Column="0" Grid.Row="0" Spacing="8">
                <TextBlock Text="Standard TextBox with Icon"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMTextBox
                  Label="Part ID"
                  Icon="Barcode"
                  PlaceholderText="Enter part identifier..."
                  Text="{Binding TextBoxValue}"
                  IsRequired="True"
                  IsEnabled="{Binding ControlsEnabled}"
                  ShowCopyButton="True"
                  ShowPasteButton="True" />
              </StackPanel>

              <!-- Floating Label TextBox -->
              <StackPanel Grid.Column="1" Grid.Row="0" Spacing="8">
                <TextBlock Text="Floating Label TextBox"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMTextBox
                  Label="Manufacturing Notes"
                  Icon="NoteText"
                  Text="{Binding FloatingLabelText}"
                  UseFloatingLabel="True"
                  IsEnabled="{Binding ControlsEnabled}"
                  HelperText="Enter any special manufacturing instructions" />
              </StackPanel>

              <!-- Character Limited TextBox -->
              <StackPanel Grid.Column="0" Grid.Row="1" Spacing="8">
                <TextBlock Text="Character Limited TextBox"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMTextBox
                  Label="Short Description"
                  Icon="FileDocument"
                  PlaceholderText="Brief description..."
                  MaxLength="50"
                  ShowCharacterCount="True"
                  IsEnabled="{Binding ControlsEnabled}"
                  HasValidationError="{Binding ShowValidationErrors}"
                  ValidationMessage="Description must be under 50 characters" />
              </StackPanel>

              <!-- Multiline TextBox -->
              <StackPanel Grid.Column="1" Grid.Row="1" Spacing="8">
                <TextBlock Text="Multiline TextBox"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMTextBox
                  Label="Detailed Notes"
                  Icon="TextBoxMultiple"
                  Text="{Binding MultilineText}"
                  AcceptsReturn="True"
                  TextWrapping="Wrap"
                  MinHeight="80"
                  IsEnabled="{Binding ControlsEnabled}"
                  ShowCharacterCount="True"
                  MaxLength="500" />
              </StackPanel>

              <!-- Read-Only TextBox -->
              <StackPanel Grid.Column="0" Grid.Row="2" Spacing="8">
                <TextBlock Text="Read-Only TextBox"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMTextBox
                  Label="System Generated ID"
                  Icon="Key"
                  Text="MTM-2024-001-ABCD"
                  IsReadOnly="True"
                  ShowCopyButton="True"
                  ShowClearButton="False" />
              </StackPanel>

              <!-- Validation Error TextBox -->
              <StackPanel Grid.Column="1" Grid.Row="2" Spacing="8">
                <TextBlock Text="Validation Error State"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMTextBox
                  Label="Serial Number"
                  Icon="Identifier"
                  PlaceholderText="Enter serial number..."
                  IsRequired="True"
                  IsEnabled="{Binding ControlsEnabled}"
                  HasValidationError="{Binding ShowValidationErrors}"
                  ValidationMessage="Serial number format is invalid. Expected: SN-YYYYMMDD-###" />
              </StackPanel>
            </Grid>
          </StackPanel>
        </Border>

        <!-- MTMRichTextBox Section -->
        <Border Background="{StaticResource CardBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="20"
                BoxShadow="0 2 8 0 #11000000">
          
          <StackPanel Spacing="16">
            <!-- Section Header -->
            <Grid ColumnDefinitions="Auto,*,Auto">
              <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8">
                <material:MaterialIcon Kind="FileDocumentEdit" 
                                      Width="20" Height="20" 
                                      Foreground="{StaticResource PrimaryBrush}"
                                      VerticalAlignment="Center" />
                <TextBlock Text="MTMRichTextBox Controls"
                           FontSize="16"
                           FontWeight="SemiBold"
                           VerticalAlignment="Center" />
              </StackPanel>

              <Button Grid.Column="2"
                      Content="Test Formatting"
                      Command="{Binding TestFormattingCommand}"
                      Background="Transparent"
                      BorderBrush="{StaticResource PrimaryBrush}"
                      BorderThickness="1"
                      Padding="8,4"
                      CornerRadius="4" />
            </Grid>

            <!-- RichTextBox Examples -->
            <Grid ColumnDefinitions="*,*" RowSpacing="16" ColumnSpacing="20">
              
              <!-- Full-Featured RichTextBox -->
              <StackPanel Grid.Column="0" Spacing="8">
                <TextBlock Text="Full-Featured Rich Text Editor"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMRichTextBox
                  Label="Manufacturing Instructions"
                  Text="{Binding RichTextContent}"
                  ShowToolbar="True"
                  ShowStatusBar="True"
                  ShowWordCount="True"
                  ShowSaveButton="True"
                  IsEnabled="{Binding ControlsEnabled}"
                  MinHeight="250" />
              </StackPanel>

              <!-- Code Editor Style -->
              <StackPanel Grid.Column="1" Spacing="8">
                <TextBlock Text="Code Editor with Line Numbers"
                           FontWeight="Medium"
                           Foreground="#555" />
                <controls:MTMRichTextBox
                  Label="SQL Script / Code"
                  Text="{Binding CodeEditorContent}"
                  ShowToolbar="False"
                  ShowStatusBar="True"
                  ShowLineNumbers="True"
                  FontFamily="Consolas, Monaco, monospace"
                  FontSize="12"
                  IsEnabled="{Binding ControlsEnabled}"
                  MinHeight="250"
                  PlaceholderText="Enter your code here..." />
              </StackPanel>
            </Grid>
          </StackPanel>
        </Border>

        <!-- CollapsiblePanel Integration Example -->
        <Border Background="{StaticResource CardBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="20"
                BoxShadow="0 2 8 0 #11000000">
          
          <StackPanel Spacing="16">
            <!-- Section Header -->
            <StackPanel Orientation="Horizontal" Spacing="8">
              <material:MaterialIcon Kind="ViewModule" 
                                    Width="20" Height="20" 
                                    Foreground="{StaticResource PrimaryBrush}"
                                    VerticalAlignment="Center" />
              <TextBlock Text="CollapsiblePanel Integration"
                         FontSize="16"
                         FontWeight="SemiBold"
                         VerticalAlignment="Center" />
            </StackPanel>

            <!-- Collapsible Panels with Custom Controls -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="20">
              
              <!-- Left Panel -->
              <controls:CollapsiblePanel Grid.Column="0"
                                       HeaderText="Quick Entry Form"
                                       Icon="FormSelect"
                                       HeaderPosition="Top"
                                       IsExpanded="True">
                <StackPanel Spacing="12" Margin="16">
                  <controls:MTMComboBox
                    Label="Location"
                    Icon="MapMarker"
                    Items="{Binding TestItems}"
                    SelectedItem="{Binding SelectedComboItem}"
                    IsEnabled="{Binding ControlsEnabled}" />
                  
                  <controls:MTMTextBox
                    Label="Part ID"
                    Icon="Barcode"
                    Text="{Binding TextBoxValue}"
                    IsEnabled="{Binding ControlsEnabled}" />
                  
                  <Button Content="Submit Entry"
                          Background="{StaticResource PrimaryBrush}"
                          Foreground="White"
                          Padding="12,8"
                          CornerRadius="4"
                          HorizontalAlignment="Stretch" />
                </StackPanel>
              </controls:CollapsiblePanel>

              <!-- Right Panel -->
              <controls:CollapsiblePanel Grid.Column="1"
                                       HeaderText="Advanced Notes"
                                       Icon="NoteMultiple"
                                       HeaderPosition="Top"
                                       IsExpanded="False">
                <StackPanel Spacing="12" Margin="16">
                  <controls:MTMRichTextBox
                    Label="Detailed Notes"
                    Text="{Binding RichTextContent}"
                    ShowToolbar="True"
                    ShowStatusBar="False"
                    MinHeight="150"
                    IsEnabled="{Binding ControlsEnabled}" />
                  
                  <Button Content="Save Notes"
                          Background="{StaticResource AccentBrush}"
                          Foreground="White"
                          Padding="12,8"
                          CornerRadius="4"
                          HorizontalAlignment="Stretch" />
                </StackPanel>
              </controls:CollapsiblePanel>
            </Grid>
          </StackPanel>
        </Border>
      </StackPanel>
    </ScrollViewer>

    <!-- Footer Status -->
    <Border Grid.Row="2"
            Background="{StaticResource HeaderBrush}"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="4"
            Padding="12,8"
            Margin="0,16,0,0">
      
      <Grid ColumnDefinitions="Auto,*,Auto">
        <material:MaterialIcon Grid.Column="0"
                              Kind="InformationOutline"
                              Width="16" Height="16"
                              Foreground="{StaticResource AccentBrush}"
                              VerticalAlignment="Center" />
        
        <TextBlock Grid.Column="1"
                   Text="Use the buttons above to test different control states and features. All controls follow MTM design guidelines."
                   FontSize="11"
                   Foreground="#666"
                   Margin="8,0"
                   VerticalAlignment="Center" />
        
        <CheckBox Grid.Column="2"
                  Content="Show Validation Errors"
                  IsChecked="{Binding ShowValidationErrors}"
                  VerticalAlignment="Center" />
      </Grid>
    </Border>
  </Grid>
</UserControl>
