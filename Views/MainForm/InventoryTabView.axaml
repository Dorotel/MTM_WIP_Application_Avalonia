<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:MTM_WIP_Application_Avalonia.ViewModels"
             mc:Ignorable="d"
             d:DesignWidth="800"
             d:DesignHeight="600"
             x:Class="MTM_WIP_Application_Avalonia.Views.InventoryTabView"
             x:CompileBindings="True"
             x:DataType="vm:InventoryTabViewModel">

  <UserControl.Styles>
    <!-- Input field styles with MTM theme integration -->
    <Style Selector="ComboBox.input-field">
      <Setter Property="Margin" Value="4"/>
      <Setter Property="Padding" Value="8,4"/>
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="BorderBrush" Value="{DynamicResource MTM.BorderBrush}"/>
      <Setter Property="Background" Value="{DynamicResource MTM.CardBackgroundBrush}"/>
    </Style>
    <Style Selector="ComboBox.input-field.error">
      <Setter Property="BorderBrush" Value="{DynamicResource MTM.ErrorBrush}"/>
      <Setter Property="Background" Value="{DynamicResource MTM.ErrorLightBrush}"/>
    </Style>
    
    <Style Selector="TextBox.input-field">
      <Setter Property="Margin" Value="4"/>
      <Setter Property="Padding" Value="8,4"/>
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="BorderBrush" Value="{DynamicResource MTM.BorderBrush}"/>
      <Setter Property="Background" Value="{DynamicResource MTM.CardBackgroundBrush}"/>
    </Style>
    <Style Selector="TextBox.input-field.error">
      <Setter Property="BorderBrush" Value="{DynamicResource MTM.ErrorBrush}"/>
      <Setter Property="Background" Value="{DynamicResource MTM.ErrorLightBrush}"/>
    </Style>

    <!-- Label styles -->
    <Style Selector="TextBlock.field-label">
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="FontWeight" Value="Medium"/>
      <Setter Property="VerticalAlignment" Value="Center"/>
      <Setter Property="Margin" Value="4,0"/>
      <Setter Property="HorizontalAlignment" Value="Right"/>
      <Setter Property="Foreground" Value="{DynamicResource MTM.PrimaryTextBrush}"/>
    </Style>

    <!-- Button styles with MTM theme -->
    <Style Selector="Button.action-button">
      <Setter Property="Padding" Value="12,6"/>
      <Setter Property="Margin" Value="4"/>
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="FontWeight" Value="Medium"/>
      <Setter Property="CornerRadius" Value="4"/>
      <Setter Property="MinWidth" Value="80"/>
    </Style>
    
    <Style Selector="Button.primary">
      <Setter Property="Background" Value="{DynamicResource MTM.PrimaryBrush}"/>
      <Setter Property="Foreground" Value="{DynamicResource MTM.LightTextBrush}"/>
      <Setter Property="BorderBrush" Value="{DynamicResource MTM.PrimaryBrush}"/>
    </Style>
    <Style Selector="Button.primary:pointerover">
      <Setter Property="Background" Value="{DynamicResource MTM.PrimaryHoverBrush}"/>
    </Style>
    <Style Selector="Button.primary:disabled">
      <Setter Property="Background" Value="{DynamicResource MTM.PrimaryDisabledBrush}"/>
      <Setter Property="Foreground" Value="{DynamicResource MTM.SecondaryTextBrush}"/>
    </Style>

    <Style Selector="Button.secondary">
      <Setter Property="Background" Value="{DynamicResource MTM.CardBackgroundBrush}"/>
      <Setter Property="Foreground" Value="{DynamicResource MTM.PrimaryTextBrush}"/>
      <Setter Property="BorderBrush" Value="{DynamicResource MTM.BorderBrush}"/>
      <Setter Property="BorderThickness" Value="1"/>
    </Style>
    <Style Selector="Button.secondary:pointerover">
      <Setter Property="Background" Value="{DynamicResource MTM.PrimaryBrush}"/>
      <Setter Property="Foreground" Value="{DynamicResource MTM.LightTextBrush}"/>
    </Style>
  </UserControl.Styles>

  <!-- Responsive layout that stretches to fill available space -->
  <Grid RowDefinitions="Auto,*,Auto,Auto" 
        HorizontalAlignment="Stretch" 
        VerticalAlignment="Stretch">
    
    <!-- Header with simple icon -->
    <StackPanel Grid.Row="0" 
                Orientation="Horizontal" 
                Margin="8,8,8,4"
                HorizontalAlignment="Left">
      <TextBlock Text="ðŸ“¦" 
                 FontSize="20"
                 VerticalAlignment="Center"
                 Margin="0,0,8,0"/>
      <TextBlock Text="Inventory Entry"
                 FontSize="14"
                 FontWeight="SemiBold"
                 VerticalAlignment="Center"
                 Foreground="{DynamicResource MTM.PrimaryTextBrush}"/>
    </StackPanel>
    
    <!-- Main input fields area -->
    <Grid Grid.Row="1" 
          RowDefinitions="Auto,Auto,Auto,Auto,Auto,*"
          ColumnDefinitions="Auto,*"
          Margin="8"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch">
      
      <!-- Part Number -->
      <StackPanel Grid.Row="0" Grid.Column="0" 
                  Orientation="Horizontal" 
                  Classes="field-label">
        <TextBlock Text="ðŸ·ï¸" 
                   FontSize="16"
                   VerticalAlignment="Center"
                   Margin="0,0,4,0"/>
        <TextBlock Text="Part Number:"
                   VerticalAlignment="Center"/>
      </StackPanel>
      <ComboBox Grid.Row="0" Grid.Column="1"
                PlaceholderText="Select Part ID"
                Classes="input-field" 
                x:Name="PartComboBox"
                HorizontalAlignment="Stretch"
                ItemsSource="{Binding PartOptions}"
                SelectedItem="{Binding SelectedPart, Mode=TwoWay}"
                IsTextSearchEnabled="True"
                ToolTip.Tip="Select or enter a part number"/>

      <!-- Operation -->
      <StackPanel Grid.Row="1" Grid.Column="0" 
                  Orientation="Horizontal" 
                  Classes="field-label">
        <TextBlock Text="âš™ï¸" 
                   FontSize="16"
                   VerticalAlignment="Center"
                   Margin="0,0,4,0"/>
        <TextBlock Text="Operation:"
                   VerticalAlignment="Center"/>
      </StackPanel>
      <ComboBox Grid.Row="1" Grid.Column="1" 
                HorizontalAlignment="Stretch"
                Classes="input-field"
                PlaceholderText="Select Operation"
                x:Name="OperationComboBox"
                ItemsSource="{Binding OperationOptions}"
                SelectedItem="{Binding SelectedOperation, Mode=TwoWay}"
                ToolTip.Tip="Select an operation number"/>

      <!-- Quantity -->
      <StackPanel Grid.Row="2" Grid.Column="0" 
                  Orientation="Horizontal" 
                  Classes="field-label">
        <TextBlock Text="ðŸ”¢" 
                   FontSize="16"
                   VerticalAlignment="Center"
                   Margin="0,0,4,0"/>
        <TextBlock Text="Quantity:"
                   VerticalAlignment="Center"/>
      </StackPanel>
      <TextBox Grid.Row="2" Grid.Column="1"
               Classes="input-field"
               HorizontalAlignment="Stretch"
               x:Name="QuantityTextBox"
               Text="{Binding Quantity, Mode=TwoWay}"
               Watermark="Enter quantity"
               ToolTip.Tip="Enter numeric quantity"/>

      <!-- Location -->
      <StackPanel Grid.Row="3" Grid.Column="0" 
                  Orientation="Horizontal" 
                  Classes="field-label">
        <TextBlock Text="ðŸ“" 
                   FontSize="16"
                   VerticalAlignment="Center"
                   Margin="0,0,4,0"/>
        <TextBlock Text="Location:"
                   VerticalAlignment="Center"/>
      </StackPanel>
      <ComboBox Grid.Row="3" Grid.Column="1"
                Classes="input-field"
                PlaceholderText="Select Location"
                HorizontalAlignment="Stretch"
                x:Name="LocationComboBox"
                ItemsSource="{Binding LocationOptions}"
                SelectedItem="{Binding SelectedLocation, Mode=TwoWay}"
                ToolTip.Tip="Select a location"/>

      <!-- Notes section header with icon -->
      <StackPanel Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2"
                  Orientation="Horizontal"
                  HorizontalAlignment="Center"
                  Margin="4,8,4,4">
        <TextBlock Text="ðŸ“" 
                   FontSize="16"
                   VerticalAlignment="Center"
                   Margin="0,0,4,0"/>
        <TextBlock Text="Notes"
                   FontSize="12"
                   FontWeight="Medium"
                   VerticalAlignment="Center"
                   Foreground="{DynamicResource MTM.PrimaryTextBrush}"/>
      </StackPanel>

      <!-- Notes text area - stretches to fill remaining space -->
      <TextBox Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="2"
               x:Name="NotesTextBox"
               Text="{Binding Notes, Mode=TwoWay}"
               AcceptsReturn="True"
               TextWrapping="Wrap"
               ScrollViewer.VerticalScrollBarVisibility="Auto"
               Margin="4"
               MinHeight="120"
               Watermark="Enter additional notes (optional)"
               Background="{DynamicResource MTM.CardBackgroundBrush}"
               BorderBrush="{DynamicResource MTM.BorderBrush}"
               BorderThickness="1"
               VerticalAlignment="Stretch"/>
    </Grid>

    <!-- Action buttons row with simple icons -->
    <Grid Grid.Row="2" 
          ColumnDefinitions="Auto,Auto,*,Auto,Auto"
          Margin="8,4">
      
      <Button Grid.Column="0"
              Classes="action-button primary"
              Command="{Binding SaveCommand}"
              IsEnabled="{Binding CanSave}"
              ToolTip.Tip="Save inventory item (Enter)">
        <StackPanel Orientation="Horizontal" Spacing="4">
          <TextBlock Text="ðŸ’¾" FontSize="16"/>
          <TextBlock Text="Save"/>
        </StackPanel>
      </Button>

      <Button Grid.Column="1"
              Classes="action-button secondary"
              Command="{Binding AdvancedEntryCommand}"
              ToolTip.Tip="Open advanced inventory features">
        <StackPanel Orientation="Horizontal" Spacing="4">
          <TextBlock Text="ðŸ”§" FontSize="16"/>
          <TextBlock Text="Advanced"/>
        </StackPanel>
      </Button>

      <!-- Version display -->
      <TextBlock Grid.Column="2"
                 Text="{Binding VersionText}"
                 FontSize="10"
                 Opacity="0.7"
                 VerticalAlignment="Center"
                 HorizontalAlignment="Center"
                 Margin="8,0"
                 Foreground="{DynamicResource MTM.SecondaryTextBrush}"/>

      <Button Grid.Column="3"
              Classes="action-button secondary"
              Command="{Binding ResetCommand}"
              ToolTip.Tip="Reset form (F5) / Hard reset (Shift+F5)">
        <StackPanel Orientation="Horizontal" Spacing="4">
          <TextBlock Text="ðŸ”„" FontSize="16"/>
          <TextBlock Text="Reset"/>
        </StackPanel>
      </Button>

      <Button Grid.Column="4"
              Classes="action-button secondary"
              Command="{Binding TogglePanelCommand}"
              ToolTip.Tip="Toggle right panel"
              MinWidth="36">
        <TextBlock Text="âš™" FontSize="14"/>
      </Button>
    </Grid>

    <!-- Keyboard shortcuts info -->
    <TextBlock Grid.Row="3"
               Text="F5: Reset | Enter: Next field | Escape: Cancel | Shift+F5: Hard reset"
               FontSize="10"
               Opacity="0.6"
               HorizontalAlignment="Center"
               Margin="8,4"
               Foreground="{DynamicResource MTM.SecondaryTextBrush}"/>
  </Grid>
</UserControl>
