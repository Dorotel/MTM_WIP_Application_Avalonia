<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:MTM_WIP_Application_Avalonia.ViewModels.MainForm"
             xmlns:materialIcons="using:Material.Icons.Avalonia"
             xmlns:controls="using:MTM_WIP_Application_Avalonia.Controls"
             mc:Ignorable="d"
             d:DesignWidth="800"
             d:DesignHeight="600"
             x:Class="MTM_WIP_Application_Avalonia.Views.InventoryTabView"
             x:CompileBindings="True"
             x:DataType="vm:InventoryTabViewModel">

  <!-- Master border container for seamless MainView integration -->
  <Border x:Name="MasterContainer"
          Background="Transparent"
          BorderThickness="0"
          CornerRadius="0"
          Padding="8"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch">

    <!-- Direct grid layout for proper parent container fitting -->
    <Grid x:Name="MainContainer"
          RowDefinitions="*,Auto"
          Background="Transparent"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch">

      <!-- Content Border using StyleSystem Card class -->
      <Border Grid.Row="0"
              Classes="Card"
              Margin="0,0,0,4"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch">

      <StackPanel Spacing="16" HorizontalAlignment="Stretch">

        <!-- Form Title using StyleSystem classes -->
        <StackPanel Classes="ManufacturingFormTitle">
          <Border Classes="ManufacturingTitleIcon">
            <materialIcons:MaterialIcon Kind="Package" Classes="ManufacturingTitleIcon"/>
          </Border>
          <TextBlock Classes="ManufacturingFormTitle" Text="Add Inventory Item"/>
        </StackPanel>

        <!-- Manufacturing form grid using StyleSystem -->
        <Grid Classes="ManufacturingForm"
              RowDefinitions="80,12,80,12,*"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch">

          <!-- Row 0: Part ID + Operation using StyleSystem -->
          <Grid Grid.Row="0" Classes="ManufacturingTwoColumn" ColumnDefinitions="1*,12,1*">

            <!-- Part ID Field using Manufacturing StyleSystem -->
            <Border Grid.Column="0" Classes="ManufacturingField" Tapped="FocusPartTextBox">
              <StackPanel Classes="ManufacturingFieldContent">
                <StackPanel Classes="ManufacturingFieldHeader">
                  <materialIcons:MaterialIcon Kind="Identifier" Classes="ManufacturingFieldIcon"/>
                  <TextBlock Classes="ManufacturingFieldLabel" Text="Part ID *"/>
                </StackPanel>
                <TextBox x:Name="PartTextBox"
                         Classes="ManufacturingInput"
                         Text="{Binding SelectedPart, Mode=TwoWay}"
                         Watermark="{Binding PartWatermark}"
                         ToolTip.Tip="Select or enter a part number"
                         TabIndex="1"/>
              </StackPanel>
            </Border>

            <!-- Operation Field using Manufacturing StyleSystem -->
            <Border Grid.Column="2" Classes="ManufacturingField" Tapped="FocusOperationTextBox">
              <StackPanel Classes="ManufacturingFieldContent">
                <StackPanel Classes="ManufacturingFieldHeader">
                  <materialIcons:MaterialIcon Kind="Cog" Classes="ManufacturingFieldIcon"/>
                  <TextBlock Classes="ManufacturingFieldLabel" Text="Operation *"/>
                </StackPanel>
                <TextBox x:Name="OperationTextBox"
                         Classes="ManufacturingInput"
                         Text="{Binding SelectedOperation, Mode=TwoWay}"
                         Watermark="{Binding OperationWatermark}"
                         ToolTip.Tip="Enter operation number (90, 100, 110)"
                         TabIndex="2"/>
              </StackPanel>
            </Border>
          </Grid>

          <!-- Row 2: Location + Quantity using StyleSystem -->
          <Grid Grid.Row="2" Classes="ManufacturingTwoColumn" ColumnDefinitions="1*,12,1*">

            <!-- Location Field using Manufacturing StyleSystem -->
            <Border Grid.Column="0" Classes="ManufacturingField" Tapped="FocusLocationTextBox">
              <StackPanel Classes="ManufacturingFieldContent">
                <StackPanel Classes="ManufacturingFieldHeader">
                  <materialIcons:MaterialIcon Kind="MapMarker" Classes="ManufacturingFieldIcon"/>
                  <TextBlock Classes="ManufacturingFieldLabel" Text="Location *"/>
                </StackPanel>
                <TextBox x:Name="LocationTextBox"
                         Classes="ManufacturingInput"
                         Text="{Binding SelectedLocation, Mode=TwoWay}"
                         Watermark="{Binding LocationWatermark}"
                         ToolTip.Tip="Enter location (FLOOR, RECEIVING, etc.)"
                         TabIndex="3"/>
              </StackPanel>
            </Border>

            <!-- Quantity Field using Manufacturing StyleSystem -->
            <Border Grid.Column="2" Classes="ManufacturingField" Tapped="FocusQuantityTextBox">
              <StackPanel Classes="ManufacturingFieldContent">
                <StackPanel Classes="ManufacturingFieldHeader">
                  <materialIcons:MaterialIcon Kind="Counter" Classes="ManufacturingFieldIcon"/>
                  <TextBlock Classes="ManufacturingFieldLabel" Text="Quantity *"/>
                </StackPanel>
                <TextBox x:Name="QuantityTextBox"
                         Classes="ManufacturingInput"
                         Text="{Binding QuantityText, Mode=TwoWay}"
                         Watermark="{Binding QuantityWatermark}"
                         ToolTip.Tip="Enter numeric quantity"
                         TabIndex="4"/>
              </StackPanel>
            </Border>
          </Grid>

          <!-- Row 4: Notes Full Width using StyleSystem - fills remaining space -->
          <Border Grid.Row="4" Classes="ManufacturingField Notes"
                  HorizontalAlignment="Stretch"
                  VerticalAlignment="Stretch"
                  Tapped="FocusNotesTextBox">
            <Grid Classes="ManufacturingSingleColumn" RowDefinitions="Auto,*">
              <!-- Label Row -->
              <StackPanel Grid.Row="0" Classes="ManufacturingFieldHeader">
                <materialIcons:MaterialIcon Kind="NoteText" Classes="ManufacturingFieldIcon"/>
                <TextBlock Classes="ManufacturingFieldLabel" Text="Notes (Optional)"/>
              </StackPanel>
              <!-- TextBox Row - multiline and fills remaining area -->
              <TextBox Grid.Row="1"
                       x:Name="NotesTextBox"
                       Classes="ManufacturingInput Notes"
                       Text="{Binding Notes, Mode=TwoWay}"
                       Watermark="{Binding NotesWatermark}"
                       ToolTip.Tip="Optional notes or comments - Press Enter for new line"
                       TabIndex="5"
                       AcceptsReturn="True"
                       TextWrapping="Wrap"
                       VerticalAlignment="Stretch"
                       HorizontalAlignment="Stretch"
                       Height="NaN"
                       MinHeight="120"/>
            </Grid>
          </Border>


        </Grid>

      </StackPanel>
    </Border>

    <!-- Action buttons panel - separate from main form panel -->
    <Border Grid.Row="1"
            Classes="ManufacturingField"
            Padding="12,8"
            Margin="0,8,0,8"
            HorizontalAlignment="Stretch">

      <Grid Classes="ManufacturingActions" ColumnDefinitions="Auto,*,Auto">

        <!-- Primary Actions using StyleSystem -->
        <StackPanel Grid.Column="0"
                    Orientation="Horizontal"
                    Spacing="8"
                    HorizontalAlignment="Left">

          <!-- Save Button using Manufacturing StyleSystem - Compact -->
          <Button x:Name="SaveButton"
                  Classes="Primary ManufacturingSave"
                  Command="{Binding SaveCommand}"
                  IsEnabled="{Binding CanSave}"
                  ToolTip.Tip="Save inventory item (Enter to execute)"
                  TabIndex="6"
                  Height="32"
                  MinWidth="100">
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Spacing="6">
              <materialIcons:MaterialIcon Kind="ContentSave" Classes="ManufacturingActionIcon"/>
              <TextBlock Classes="Caption" Text="Save Item"/>
            </StackPanel>
          </Button>

          <!-- Reset Button using Manufacturing StyleSystem - Compact -->
          <Button Classes="Secondary ManufacturingReset"
                  Command="{Binding ResetCommand}"
                  CommandParameter="False"
                  ToolTip.Tip="Reset form (F5 for soft reset, Shift+F5 for hard reset)"
                  Height="32"
                  MinWidth="80">
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Spacing="6">
              <materialIcons:MaterialIcon Kind="Refresh" Classes="ManufacturingSecondaryIcon"/>
              <TextBlock Classes="Caption" Text="Reset"/>
            </StackPanel>
          </Button>
        </StackPanel>

        <!-- Advanced Actions using StyleSystem - Compact -->
        <Button Grid.Column="2"
                Classes="Icon ManufacturingAdvanced"
                Command="{Binding AdvancedEntryCommand}"
                ToolTip.Tip="Open advanced inventory features"
                Height="32"
                Width="32">
          <materialIcons:MaterialIcon Kind="Settings" Classes="ManufacturingLargeIcon"/>
        </Button>
      </Grid>
    </Border>

    </Grid>
  </Border>
</UserControl>

