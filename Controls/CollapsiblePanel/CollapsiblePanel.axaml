<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:material="using:Material.Icons.Avalonia"
        xmlns:local="using:MTM_WIP_Application_Avalonia.Controls"
        mc:Ignorable="d">

  <!-- Manufacturing-Grade CollapsiblePanel HeaderedContentControl Style -->
  <Style Selector="local|CollapsiblePanel">
    <Setter Property="MinWidth" Value="240"/>
    <Setter Property="MinHeight" Value="48"/>
    <Setter Property="Template">
      <ControlTemplate>
        <!-- Manufacturing-Grade Root Container with Professional MTM Styling -->
        <Border x:Name="PART_RootContainer" Classes="collapsible-root">

          <!-- Dynamic Responsive Grid Layout (configured by code-behind with ResolutionIndependentSizing) -->
          <Grid x:Name="PART_RootGrid">

            <!-- Professional Header Bar with MTM Manufacturing Gradient -->
            <Border x:Name="PART_HeaderArea"
                    Classes="collapsible-header">

              <!-- Manufacturing-Grade Header Content Layout with Responsive Design -->
              <Grid x:Name="PART_HeaderContentGrid">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto"/>
                  <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- MTM Icon Button for Toggle with Manufacturing Standards -->
                <Button x:Name="PART_ToggleButton"
                        Grid.Column="0"
                        Classes="Icon Small Primary"
                        ToolTip.Tip="Expand/Collapse Panel">

                  <!-- Professional Material Icon with MTM Theme V2 Integration -->
                  <material:MaterialIcon x:Name="PART_ToggleIcon"
                                         Kind="ChevronRight"/>
                </Button>

                <!-- Professional Header Content Presenter with Enhanced Typography -->
                <ContentPresenter x:Name="PART_HeaderPresenter"
                                Grid.Column="1"
                                Content="{TemplateBinding Header}"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Left"
                                Margin="12,0,12,0"/>

              </Grid>
            </Border>

            <!-- Professional Content Container with MTM Card Styling -->
            <Border x:Name="PART_ContentArea"
                    Classes="collapsible-content">
              <!-- Enhanced Content Presenter with Professional Typography -->
              <ContentPresenter x:Name="PART_ContentPresenter"
                              Content="{TemplateBinding Content}"
                              TextElement.Foreground="{DynamicResource ThemeV2.Content.Primary}"/>
            </Border>

          </Grid>
        </Border>
      </ControlTemplate>
    </Setter>
  </Style>

  <!-- Manufacturing-Grade CollapsiblePanel Styles with ResolutionIndependentSizing -->

  <!-- Professional Header Panel using MTM HeaderPanel Style -->
  <Style Selector="Border.collapsible-header">
    <!-- Enhanced professional gradient background using proper theme tokens -->
    <Setter Property="Background" Value="{DynamicResource ThemeV2.Action.Primary}"/>
    <!-- No border on main control to prevent blue line artifacts -->
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="CornerRadius" Value="{StaticResource ThemeV2.CornerRadius.Large}"/>
    <!-- Professional drop shadow - theme aware -->
    <Setter Property="BoxShadow" Value="{DynamicResource ThemeV2.Shadow.Small}"/>
    <!-- Smooth transitions -->
    <Setter Property="Transitions">
      <Transitions>
        <BrushTransition Property="Background" Duration="0:0:0.25"/>
        <BrushTransition Property="BorderBrush" Duration="0:0:0.25"/>
      </Transitions>
    </Setter>
  </Style>

  <!-- Enhanced Header Hover State with Professional Visual Feedback -->
  <Style Selector="Border.collapsible-header:pointerover">
    <Setter Property="Background" Value="{DynamicResource ThemeV2.Action.Primary.Hover}"/>
    <!-- Remove border on hover to prevent grey line -->
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="BoxShadow" Value="{DynamicResource ThemeV2.Shadow.Hover}"/>
  </Style>

  <!-- Now using standard MTM Icon Button styles (Button.Icon.Small) -->
  <!-- Custom toggle styles removed to use professional MTM Icon Button system -->

  <!-- Professional Content Container using MTM Card Style -->
  <Style Selector="Border.collapsible-content">
    <Setter Property="Background" Value="{DynamicResource ThemeV2.Background.Card}"/>
    <Setter Property="BorderBrush" Value="{DynamicResource ThemeV2.Border.Default}"/>
    <Setter Property="BorderThickness" Value="2,0,2,2"/>
    <Setter Property="CornerRadius" Value="0,0,8,8"/>
    <Setter Property="Padding" Value="{StaticResource ThemeV2.Spacing.Small}"/>
    <!-- Subtle content shadow - theme aware -->
    <Setter Property="BoxShadow" Value="{DynamicResource ThemeV2.Shadow.Card}"/>
  </Style>

  <!-- Manufacturing-Grade Root Container using MTM Card Style -->
  <Style Selector="Border.collapsible-root">
    <Setter Property="Background" Value="{DynamicResource ThemeV2.Background.Card}"/>
    <Setter Property="BorderBrush" Value="{DynamicResource ThemeV2.Border.Default}"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="CornerRadius" Value="{StaticResource ThemeV2.CornerRadius.Large}"/>
    <!-- Professional elevation shadow - theme aware -->
    <Setter Property="BoxShadow" Value="{DynamicResource ThemeV2.Shadow.Large}"/>
    <!-- Smooth hover transitions -->
    <Setter Property="Transitions">
      <Transitions>
        <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.3"/>
      </Transitions>
    </Setter>
  </Style>

  <Style Selector="Border.collapsible-root:pointerover">
    <Setter Property="BoxShadow" Value="{DynamicResource ThemeV2.Shadow.Modal}"/>
  </Style>

  <!-- Material Icon styling now handled by MTM Icon Button styles -->

  <!-- Enhanced Header Text Styling - Adaptive Colors -->
  <Style Selector="Border.collapsible-header TextBlock, Border.collapsible-header ContentPresenter">
    <Setter Property="TextElement.Foreground" Value="{DynamicResource ThemeV2.Content.OnColor}"/>
    <Setter Property="TextElement.FontWeight" Value="{StaticResource ThemeV2.Typography.Heading6.FontWeight}"/>
  </Style>

  <!-- Ensure MaterialIcon in header buttons gets proper adaptive theming -->
  <Style Selector="Border.collapsible-header Button.Icon.Primary material|MaterialIcon">
    <Setter Property="Foreground" Value="{DynamicResource ThemeV2.Content.OnColor}"/>
  </Style>

  <!-- Fix for light mode - ensure header content uses proper adaptive colors -->
  <Style Selector="Border.collapsible-header Button material|MaterialIcon">
    <Setter Property="Foreground" Value="{DynamicResource ThemeV2.Content.OnColor}"/>
  </Style>

</Styles>
