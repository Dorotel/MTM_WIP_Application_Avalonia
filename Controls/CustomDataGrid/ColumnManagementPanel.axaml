<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialIcons="using:Material.Icons.Avalonia"
             x:Class="MTM_WIP_Application_Avalonia.Controls.CustomDataGrid.ColumnManagementPanel">
    
    <!-- Phase 3a - Column Visibility Toggle Panel -->
    
    <Border Background="{DynamicResource MTM_Shared_Logic.CardBackgroundBrush}"
            BorderBrush="{DynamicResource MTM_Shared_Logic.BorderLightBrush}"
            BorderThickness="1"
            CornerRadius="4"
            Padding="16">
        
        <Grid RowDefinitions="Auto,*,Auto" MinHeight="300">
            
            <!-- Header Section -->
            <StackPanel Grid.Row="0" Spacing="8" Margin="0,0,0,16">
                
                <Grid ColumnDefinitions="*,Auto">
                    <TextBlock Grid.Column="0"
                               Text="Column Management"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource MTM_Shared_Logic.HeadingText}" />
                    
                    <Button Grid.Column="1"
                            x:Name="CloseButton"
                            Classes="icon-button"
                            Width="24"
                            Height="24"
                            Padding="0"
                            Click="OnClosePanel"
                            ToolTip.Tip="Close Column Management">
                        <materialIcons:MaterialIcon Kind="Close" 
                                                    Width="16" 
                                                    Height="16"
                                                    Foreground="{DynamicResource MTM_Shared_Logic.BodyText}" />
                    </Button>
                </Grid>
                
                <Rectangle Fill="{DynamicResource MTM_Shared_Logic.BorderLightBrush}"
                           Height="1"
                           HorizontalAlignment="Stretch" />
                
            </StackPanel>
            
            <!-- Column List Section -->
            <ScrollViewer Grid.Row="1" 
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled">
                
                <StackPanel x:Name="ColumnListContainer" 
                            Spacing="4">
                    
                    <!-- Column items will be added here by code-behind -->
                    
                </StackPanel>
                
            </ScrollViewer>
            
            <!-- Action Buttons Section -->
            <StackPanel Grid.Row="2"
                        Spacing="8"
                        Margin="0,16,0,0"
                        Orientation="Horizontal"
                        HorizontalAlignment="Stretch">
                
                <Rectangle Fill="{DynamicResource MTM_Shared_Logic.BorderLightBrush}"
                           Height="1"
                           HorizontalAlignment="Stretch"
                           Grid.ColumnSpan="3"
                           Margin="0,0,0,8" />
                
                <Button x:Name="ShowAllButton"
                        Content="Show All"
                        Classes="secondary-button"
                        MinWidth="80"
                        Padding="12,6"
                        Click="OnShowAllColumns"
                        ToolTip.Tip="Make all columns visible" />
                
                <Button x:Name="HideAllButton"
                        Content="Hide All"
                        Classes="secondary-button"
                        MinWidth="80"
                        Padding="12,6"
                        Click="OnHideAllColumns"
                        ToolTip.Tip="Hide all non-essential columns" />
                
                <Button x:Name="ResetButton"
                        Content="Reset"
                        Classes="secondary-button"
                        MinWidth="80"
                        Padding="12,6"
                        Click="OnResetLayout"
                        ToolTip.Tip="Reset to default column layout" />
                
            </StackPanel>
            
        </Grid>
        
    </Border>
    
</UserControl>