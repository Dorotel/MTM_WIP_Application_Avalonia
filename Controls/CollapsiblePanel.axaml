<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:material="using:Material.Icons.Avalonia"
             mc:Ignorable="d"
             d:DesignWidth="400"
             d:DesignHeight="600"
             x:Class="MTM_WIP_Application_Avalonia.Controls.CollapsiblePanel">

  <UserControl.Resources>
    <!-- MTM Color Scheme matching your design -->
    <SolidColorBrush x:Key="HeaderBrush" Color="#FFD700"/>           <!-- Gold/Yellow header -->
    <SolidColorBrush x:Key="ContentBackgroundBrush" Color="#F8F9FA"/> <!-- Light gray content background -->
    <SolidColorBrush x:Key="BorderBrush" Color="#E0E0E0"/>            <!-- Border color -->
    <SolidColorBrush x:Key="AccentBrush" Color="#6B7280"/>            <!-- Icon color -->
    <SolidColorBrush x:Key="HeaderTextBrush" Color="#000000"/>        <!-- Header text color -->
  </UserControl.Resources>

  <!-- Use explicit template to ensure proper initialization -->
  <UserControl.Template>
    <ControlTemplate>
      <!-- Empty grid that gets configured dynamically by code -->
      <Grid x:Name="RootGrid">
        
        <!-- Gold Header Bar (position determined by HeaderPosition property) -->
        <Border x:Name="HeaderArea"
                Background="{StaticResource HeaderBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                MinWidth="40"
                MinHeight="40">
          
          <!-- Simple grid for toggle button only -->
          <Grid x:Name="HeaderContentGrid">
            
            <!-- Toggle Button - positioned dynamically by code -->
            <Button x:Name="ToggleButton"
                    Background="Transparent"
                    BorderThickness="0"
                    Width="20"
                    Height="20"
                    Click="OnToggleClick"
                    Cursor="Hand">
              <material:MaterialIcon x:Name="ToggleIcon"
                                     Kind="ChevronRight"
                                     Width="12"
                                     Height="12"
                                     Foreground="{StaticResource AccentBrush}"/>
            </Button>
            
          </Grid>
        </Border>

        <!-- Content Area (position determined by HeaderPosition property) -->
        <Border x:Name="ContentArea"
                Background="{StaticResource ContentBackgroundBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                Padding="16">
          <ContentPresenter x:Name="ContentPresenter" Content="{TemplateBinding Content}"/>
        </Border>

      </Grid>
    </ControlTemplate>
  </UserControl.Template>

</UserControl>
